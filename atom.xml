<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hi, aphage</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://aphage.me/"/>
  <updated>2020-03-23T02:44:43.791Z</updated>
  <id>https://aphage.me/</id>
  
  <author>
    <name>aphage</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>9102å¹´9æœˆæˆ‘å¾—äº†è‚ºç‚</title>
    <link href="https://aphage.me/September-9102-I-got-pneumonia/"/>
    <id>https://aphage.me/September-9102-I-got-pneumonia/</id>
    <published>2020-03-19T14:53:00.000Z</published>
    <updated>2020-03-23T02:44:43.791Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å›å¿†9012å¹´ç”Ÿç—…ğŸ˜·è¿‡ç¨‹"><a href="#å›å¿†9012å¹´ç”Ÿç—…ğŸ˜·è¿‡ç¨‹" class="headerlink" title="å›å¿†9012å¹´ç”Ÿç—…ğŸ˜·è¿‡ç¨‹"></a>å›å¿†9012å¹´ç”Ÿç—…ğŸ˜·è¿‡ç¨‹</h1><h2 id="ç¬¬ä¸€å¤©"><a href="#ç¬¬ä¸€å¤©" class="headerlink" title="ç¬¬ä¸€å¤©"></a>ç¬¬ä¸€å¤©</h2><p>å–‰å’™æœ‰ä¸€ç‚¹ä¸èˆ’æœï¼Œæœ‰ä¸€ç‚¹å’³å—½ï¼ˆå¾ˆè½»çš„é‚£ç§å’³å—½ï¼‰ï¼Œæ²¡æœ‰å¾ˆåœ¨æ„ï¼Œæ™šä¸Šç¡è§‰æ—¶èººä¸‹ä¼šæœ‰ä¸€ç‚¹å’³å—½</p><h2 id="ç¬¬äºŒå¤©"><a href="#ç¬¬äºŒå¤©" class="headerlink" title="ç¬¬äºŒå¤©"></a>ç¬¬äºŒå¤©</h2><p>é¢‘ç‡æœ‰æ‰€å¢åŠ ï¼Œä½†ä¹Ÿä¸æ˜¯å¾ˆé¢‘ç¹ï¼Œæ™šä¸Šç¡è§‰æ—¶çš„æ—¶å€™èººä¸‹é¢‘ç‡å¤§å¹…å¢åŠ ï¼Œç¡ä¸ç€è§‰ï¼Œæ„è¯†åˆ°ä¸å¦™ï¼Œè§‰å¾—æ˜å¤©è¦å»åŒ»é™¢</p><h2 id="ç¬¬ä¸‰å¤©"><a href="#ç¬¬ä¸‰å¤©" class="headerlink" title="ç¬¬ä¸‰å¤©"></a>ç¬¬ä¸‰å¤©</h2><p>æ„è¯†ä¸æ˜¯å¾ˆå¥½ï¼Œæ€•å†·ï¼Œæ‘¸æ‘¸é¢å¤´å·²ç»å‘çƒ§äº†</p><p>å»ç¤¾åŒºåŒ»é™¢ï¼Œé‡äº†ä½“æ¸©ï¼Œåšäº†ä¸ªè¡€å¸¸è§„ï¼Œ<code>ç™½ç»†èƒä¸Šå‡</code>ï¼Œ<code>ç²’ç»†èƒä¸Šå‡</code>ï¼Œè¯Šæ–­<code>æ€¥æ€§ä¸Šå‘¼å¸é“æ„ŸæŸ“</code>ï¼Œå¼€äº†3å¤©çš„è¯ç‰©ï¼Œæœ‰é™æ¸©è¯ï¼Œå¤´å­¢ï¼Œè¿˜æœ‰ä¸€äº›å’½å–‰ç‚çš„</p><p>å›å»ååƒäº†è¦è¯ï¼Œä½“æ¸©ä½“æ¸©æ­£å¸¸ï¼Œä¸æ€•å†·äº†ï¼Œå’³å—½æœ‰æ‰€ç¼“è§£ï¼Œä½†æ™šä¸Šç¡è§‰èººä¸‹æ˜¯è¿˜æ˜¯ä¼šæœ‰å’³å—½</p><a id="more"></a><h2 id="ç¬¬å››å¤©"><a href="#ç¬¬å››å¤©" class="headerlink" title="ç¬¬å››å¤©"></a>ç¬¬å››å¤©</h2><p>æ—©ä¸Šèµ·æ¥ï¼Œåˆå¼€å§‹æ€•å†·ï¼Œæ‘¸æ‘¸é¢å¤´æœ‰ä¸€ç‚¹ä½çƒ§ï¼Œï¼ˆæ„Ÿè§‰æ˜¯è¯æ•ˆè¿‡äº†ï¼Œå› ä¸ºé™æ¸©è¯ä¸€å¤©åƒä¸€æ¬¡ï¼Œå¤´å­¢å’Œå’½å–‰ç‚çš„è¯ä¸€å¤©ä¸‰æ¬¡ï¼‰</p><p>åƒäº†ç‚¹ä¸œè¥¿åï¼Œé©¬ä¸ŠæŠŠè¯åƒäº†ï¼Œä¸€æ®µæ—¶é—´åï¼Œä½“æ¸©åˆæ­£å¸¸äº†ï¼Œä¸æ€•å†·äº†</p><p>æ™šä¸Šåˆå¼€å§‹ä½çƒ§äº†ï¼Œå’³å—½é¢‘ç‡ä¹Ÿå¢åŠ äº†ï¼Œæ›´åŠ éš¾å—äº†</p><h2 id="9æœˆ6æ—¥"><a href="#9æœˆ6æ—¥" class="headerlink" title="9æœˆ6æ—¥"></a>9æœˆ6æ—¥</h2><p>CTï¼šæ˜¾ç¤ºå·¦ä¸‹è‚ºéƒ¨æ„ŸæŸ“<br>æµæ„ŸA+BæŠ—åŸæ£€æµ‹ï¼šé˜´æ€§</p><p>è·å¾—ï¼š</p><ol><li>æ°¯åŒ–é’ (0.9%)æ³¨å°„æ¶²(åŒé¹¤250ml) X 2</li><li>æ°¯åŒ–é’ (0.9%)æ³¨å°„æ¶²(åŒé¹¤100ml) X 2</li><li>æ³¨å°„ç”¨äº”æ°´å¤´å­¢å”‘å•‰é’ (æ–°æ³°æ—) X 6</li><li>ç›é…¸æ°¨æº´ç´¢æ³¨å°„æ¶²(æ²èˆ’å¦) X 8</li><li>å¤æ–¹ç”²æ°§é‚£æ˜èƒ¶å›Š(é˜¿æ–¯ç¾) X 18</li><li>å°¼ç¾èˆ’åˆ©åˆ†æ•£ç‰‡(åŠ›ç¾æ¾) X 20</li></ol><p>å»äº†ä¸‰ç”²åŒ»é™¢ï¼Œå»äº†æ€¥è¯Šç§‘ï¼ˆæŒ‚ä¸åˆ°å·ï¼Œä¸ç„¶æˆ‘ä¹Ÿä¸ä¼šå»ç¤¾åŒºåŒ»é™¢ï¼‰ï¼Œåšç™»è®°ï¼Œé‡ä½“æ¸©ï¼Œï¼ˆ38Â°å·¦å³ï¼‰ï¼Œç™»è®°çš„äººå‘˜ç»™äº†æˆ‘ä¸€ä¸ªå£ç½©è®©æˆ‘æˆ´ä¸Šï¼Œç™»è®°å®Œåæ’é˜Ÿ</p><p>ç»ˆäºåˆ°æˆ‘äº†ï¼Œäº†è§£æƒ…å†µåï¼ŒåŒ»ç”Ÿè®©æˆ‘å»æ‹ä¸ªCTï¼Œ<code>CTæ˜¾ç¤ºè‚ºéƒ¨æ„ŸæŸ“ï¼Œç¡®è¯Šè‚ºç‚</code>ï¼Œï¼ˆåŒ»ç”Ÿè®©æˆ‘ä½é™¢ï¼Œç„¶ååˆè¯´æ²¡æœ‰åºŠä½ï¼‰</p><h2 id="9æœˆ7æ—¥"><a href="#9æœˆ7æ—¥" class="headerlink" title="9æœˆ7æ—¥"></a>9æœˆ7æ—¥</h2><p>ä½“æ¸©ï¼š38.5Â°</p><p>è¡€æ¶²æ£€æµ‹ è¡€å¸¸è§„ã€C-ååº”è›‹ç™½æµ‹å®š</p><p>è·å¾—ï¼š</p><ol><li>æ°¯åŒ–é’ (0.9%)æ³¨å°„æ¶²(åŒé¹¤250ml) X 1</li><li>æ³¨å°„ç”¨ç²¾æ°¨é…¸é˜¿å¸åŒ¹æ—(å¯å¯å…‹) X 2</li><li>æ°¯åŒ–é’ (0.9%)æ³¨å°„æ¶²(åŒé¹¤250ml) X 1</li><li>(å€èµ›ä»–)å¤´å­¢æ›²æ¾é’ ä»–å”‘å·´å¦é’  X 1</li><li>æ°¯åŒ–é’ (0.9%)æ³¨å°„æ¶²(åŒé¹¤100ml) X 1</li><li>ç»´ç”Ÿç´ Cæ³¨å°„æ¶² X 1</li></ol><p>ç»è¿‡æŠ—ç”Ÿç´ çš„æ²»ç–—æˆ‘çš„å’³å—½å·²ç»æœ‰æ‰€ç¼“è§£ï¼Œè¿˜æœ‰ä¸€äº›ä½çƒ§ï¼Œç²¾ç¥è¿˜æ˜¯ä¸æ˜¯å¾ˆå¥½</p><h3 id="æˆ‘è¦æ­»äº†"><a href="#æˆ‘è¦æ­»äº†" class="headerlink" title="æˆ‘è¦æ­»äº†???"></a>æˆ‘è¦æ­»äº†???</h3><p>ä½†æ˜¯è¿™æ¬¡è¾“æ¶²è¿‡ç¨‹ä¸­ <strong>æˆ‘å·®ç‚¹å»ä¸–ï¼ˆè®¤çœŸçš„çœ¼ç¥ï¼‰</strong></p><p>å¼€å§‹å–‰å’™å¹²ï¼Œå’³å—½é¢‘ç‡å¿«é€Ÿå¢åŠ ï¼Œä½“æ¸©å¿«é€Ÿä¸Šå‡ï¼Œå¼€å§‹è€³é¸£ï¼Œè§†é‡å¼€å§‹æ¨¡ç³Šï¼Œå¼€å§‹å¤§æ±—æ·‹æ¼“ï¼Œå¼€å§‹æ„Ÿè§‰éå¸¸ç¼ºæ°´ï¼Œä¸å–æ°´é©¬ä¸Šå°±æ­»çš„é‚£ç§æ„Ÿè§‰</p><p>å°±åƒæ˜¯è¢«<a href="https://baike.baidu.com/item/%E6%B2%99%E6%B2%99%E6%9E%9C%E5%AE%9E" target="_blank" rel="noopener">æ²™æ²™æœå®èƒ½åŠ›è€…</a>ï¼ˆã€Šæµ·è´¼ç‹ã€‹é‡Œæ¶é­”æœå®è‡ªç„¶ç³»çš„ä¸€ç§ï¼‰ç¬é—´å¸æ°´åˆ†é‚£ç§ï¼Œéå¸¸æ¸´æœ›æ°´ï¼Œç¼ºæ°´å·²ç»åˆ°äº†æé™é‚£ç§</p><p>æˆ‘å¼€å§‹å‘¼å«æŠ¤å£«ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™æŠ¤å£«åœ¨å¸®åˆ«äººæ¢è¾“æ¶²ç“¶ï¼Œå¹¶æ²¡æœ‰è¿‡æ¥ï¼Œè€Œæ˜¯è®©æˆ‘ç­‰ä¸€ä¸‹</p><p>è¿™ä¸ªæ—¶å€™æˆ‘æ„Ÿè§‰æˆ‘å·²ç»è¦æ­»äº†ï¼Œè§†é‡è¶Šæ¥è¶Šæ¨¡ç³Šï¼Œæ„Ÿè§‰ä½“æ¸©è¶Šæ¥è¶Šé«˜ï¼Œæ„Ÿè§‰èº«ä½“è¦ç‚¸äº†ï¼ˆèº«ä½“å†…éƒ¨å¾€å¤–ç‚¸é‚£ç§æ„Ÿè§‰ï¼‰ï¼Œå‘¨å›´çš„äººçœ‹è§æˆ‘å¾ˆéš¾å—ï¼ˆæ¯•ç«Ÿè¦æ­»äº†çš„æ„Ÿè§‰ï¼‰ï¼Œå¼€å§‹å¸®å¿™å‘¼å«æŠ¤å£«ï¼Œè€³é¸£è¶Šæ¥è¶Šå‰å®³ï¼Œæˆ‘å¼€å§‹å¬ä¸è§å‘¨å›´çš„å£°éŸ³ï¼Œè§†é‡å¼€å§‹å˜æš—ï¼Œé€æ¸å…¨é»‘ï¼Œå¤±æ˜ï¼Œæ„è¯†ä¹Ÿæ²¡æœ‰äº†~</p><p>æ•´ä¸ªè¿‡ç¨‹åªæœ‰åå‡ ç§’</p><p>å½“æˆ‘é€æ¸æ¢å¤æ„è¯†ï¼Œè§†é‡çš„æ—¶å€™çœ‹è§æŠ¤å£«å·²ç»ç«™åˆ°æˆ‘å‰é¢äº†ï¼Œå¥¹å·²ç»æŠŠè¾“æ¶²åœäº†ï¼Œå¬è§‰ä¹Ÿå¼€å§‹é€æ¸æ¢å¤ï¼Œå¥¹è¯¢é—®æˆ‘ç°åœ¨æ„Ÿè§‰æ€ä¹ˆæ ·ï¼Œæˆ‘è¯´å¥½å¾ˆå¤šäº†ï¼Œç„¶åå¥¹è¯¢é—®ä¹‹å‰æ˜¯ä»€ä¹ˆæ„Ÿè§‰ï¼Œå¥¹å¼€å§‹è®°å½•è¿™æ¬¡è¾“æ¶²å‡ºç°çš„ç—‡çŠ¶ï¼Œå¹¶å‘¼å«åŒ»ç”Ÿ</p><p>ï¼ˆæˆ‘ä¸çŸ¥é“ä»æˆ‘å¤±å»æ„è¯†åˆ°æŠ¤å£«ç«™åˆ°æˆ‘é¢å‰ç»è¿‡äº†å¤šä¹…?ï¼‰</p><p>åŒ»ç”Ÿæ¥äº†åè¯´æŠŠæ»´æ¶²é€Ÿåº¦è°ƒæ…¢ç‚¹ï¼Œç»§ç»­è¾“æ¶²ï¼Œå¦‚æœåœ¨å‡ºç°ç—‡çŠ¶åœ¨å«æŠ¤å£«ï¼Œå¼€å§‹ç»§ç»­è¾“æ¶²ï¼Œæ„Ÿè§‰è¾“æ¶²çš„é’ˆå¤´æ’å…¥çš„å“ªé‡Œæ„Ÿè§‰æœ‰ç‚¹èƒ€ç—›ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ²¡æœ‰å‡ºç°å…¶ä»–ç—‡çŠ¶äº†</p><p>åæ¥æŸ¥äº†ä¸€ä¸‹æ®è¯´<a href="https://baike.baidu.com/item/%E6%B0%B4%E6%9D%A8%E9%85%B8%E5%8F%8D%E5%BA%94" target="_blank" rel="noopener">æ°´æ¨é…¸ä¸­æ¯’</a>æ˜¯è¿™ç§ååº”ã€‚</p><p>è¾“æ¶²å®Œè®©æˆ‘å†å»æ‰¾åŒ»ç”Ÿçœ‹çœ‹æƒ…å†µï¼Œæˆ‘è·ŸåŒ»ç”Ÿè¯´ï¼šæˆ‘è¾“æ¶²çš„æ—¶å€™å¤±å»æ„è¯†äº†ï¼Œç„¶åä»–åé©³è¯´ï¼šä½ çŸ¥é“ä»€ä¹ˆæ˜¯å¤±å»æ„è¯†å—? å¤±å»æ„è¯†çš„å®šä¹‰æ˜¯ä»€ä¹ˆå—ï¼Ÿ</p><p>æˆ‘ï¼šã€‚ã€‚ã€‚ï¼Ÿï¼Ÿï¼Ÿ</p><h2 id="9æœˆ8æ—¥"><a href="#9æœˆ8æ—¥" class="headerlink" title="9æœˆ8æ—¥"></a>9æœˆ8æ—¥</h2><p>ä½“æ¸©ï¼š38.3Â°</p><p>è·å¾—ï¼š</p><ol><li>æ°¯åŒ–é’ (0.9%)æ³¨å°„æ¶²(åŒé¹¤100ml) X 2</li><li>ç›é…¸æ°¨æº´ç´¢æ³¨å°„æ¶²(æ²èˆ’å¦) X 4</li><li>æ°¯åŒ–é’ (0.9%)æ³¨å°„æ¶²(åŒé¹¤100ml) X 2</li><li>æ³¨å°„ç”¨äº”æ°´å¤´å­¢å”‘å•‰é’ (æ–°æ³°æ—) X 6</li><li>å¤æ–¹æ°¨æ—å·´æ¯”å¦¥æ³¨å°„æ¶² X 1</li><li>å¼ºåŠ›æ‡æ·éœ²(æ— ç³–å‹) X 1</li><li>å…‹æ„Ÿåˆ©å’½å£æœæ¶² X 24</li><li>æ¡‰æŸ è’è‚ æº¶è½¯èƒ¶å›Š(åˆ‡è¯º) X 18</li></ol><p>æˆ‘è·ŸåŒ»ç”Ÿè¯´äº†æ˜¨å¤©çš„æƒ…å†µï¼Œè¡¨æ˜æ˜¯ä¸æ˜¯æ°´æ¨é…¸ååº”</p><p>åæ¥ä»–è¯´ä½ ç°åœ¨è¿˜åœ¨å‘çƒ§ï¼Œä¸æ‰“é€€çƒ§è¯æ€ä¹ˆè¡Œï¼Œåé¢æ¢æˆäº†è‚Œè‚‰æ³¨å°„çš„å¤æ–¹æ°¨æ—å·´æ¯”å¦¥æ³¨å°„æ¶²ï¼ˆå°±æ˜¯æ‰“å±è‚¡ï¼‰ç„¶åæˆ‘å°±å»è¾“æ¶²å®¤è¾“æ¶²äº†</p><p>è‚Œè‚‰æ³¨å°„å®Œï¼ˆæ‰“å±è‚¡ï¼‰åå°±è¾“æ¶²å¤´å­¢äº†</p><p>è¿™æ¬¡è¾“æ¶²è¿‡ç¨‹ä¸­ä¹Ÿå‡ºç°äº†æ˜¨å¤©çš„æƒ…å†µï¼Œè¿™æ¬¡æ˜¯è¾“æ¶²çš„æ˜¯å¤´å­¢ï¼ˆæŠ—ç”Ÿç´ ï¼‰è¿‡ç¨‹ä¸­å‘ç”Ÿçš„</p><p>å¼€å§‹å‡ºç°ç—‡çŠ¶ï¼Œæˆ‘é©¬ä¸Šå‘¼å«æŠ¤å£«ï¼ˆæ„Ÿè§‰æˆ‘ç«‹äº†å¤§åŠŸï¼‰ï¼Œç„¶åæŠ¤å£«æŠŠè¾“æ¶²åœäº†ï¼Œï¼ˆè¿™æ¬¡æ²¡æœ‰å¤±å»æ„è¯†ï¼Œï¼‰ï¼Œå«æ¥åŒ»ç”Ÿï¼ŒåŒ»ç”Ÿè¯´è¿™æ¬¡æ²¡æœ‰è¾“é˜¿å¸åŒ¹æ—äº†å•Šï¼Œè¿™æ¬¡æ˜¯å¤´å­¢ï¼Œåæ¥ä¹Ÿæ²¡æœ‰ç»§ç»­è¾“å¤´å­¢äº†ï¼Œè€Œæ˜¯æ‹¿æ¥ä¸€ç“¶ç”Ÿç†ç›æ°´æ¥ç»™æˆ‘è¾“æ¶²ï¼Œç¼“è§£ä¸€ä¸‹ï¼Œï¼ˆåº”è¯¥æ˜¯ç¨€é‡Šä¸€ä¸‹ï¼‰</p><p>è¾“æ¶²å®Œå›å»æ„è¯†åˆ°çœ‹çœ‹è¿˜æœ‰æ²¡æœ‰å·å¯ä»¥æŒ‚ï¼Œçœ‹åˆ°æœ‰ä¸€ä¸ªå·å¯ä»¥æŒ‚é©¬ä¸ŠæŒ‚äº† ï¼ˆæ˜¯å‘¼å¸ç§‘ä¸»ä»»ï¼‰</p><h2 id="9æœˆ9æ—¥"><a href="#9æœˆ9æ—¥" class="headerlink" title="9æœˆ9æ—¥"></a>9æœˆ9æ—¥</h2><p>ä½“æ¸©ï¼š37.2Â°</p><p>è·å¾—ï¼š</p><ol><li>æ°¯åŒ–é’ (0.9%)æ³¨å°„æ¶²(åŒé¹¤250ml) X 3</li><li>ç›é…¸å·¦æ°§æ°Ÿæ²™æ˜Ÿæ³¨å°„æ¶²(å·¦å…‹) X 6</li><li>æ°¯åŒ–é’ (0.9%)æ³¨å°„æ¶²(åŒé¹¤100ml) X 6</li><li>ç›é…¸æ°¨æº´ç´¢æ³¨å°„æ¶²(æ²èˆ’å¦) X 12</li></ol><p>åˆ†3å¤©æ³¨å°„ï¼Œä¸€å¤©ä¸€æ¬¡</p><p>æˆ‘ä¹Ÿè·ŸåŒ»ç”Ÿè¯´äº†ä¹‹å‰çš„å‘ç”Ÿçš„æƒ…å†µï¼Œæˆ‘è¯´ï¼šé‚£è¿˜æ³¨å°„å¤´å­¢å—?</p><p>å¥¹è¯´ï¼šä½ éƒ½å‡ºç°é‚£ç§æƒ…å†µäº†ï¼Œæˆ‘å“ªæ•¢è¿˜ç»™ä½ æ³¨å°„å¤´å­¢ã€‚</p><p>åé¢æ¢æˆäº†ç›é…¸å·¦æ°§æ°Ÿæ²™æ˜Ÿ(è¿™ä¸ªä¼šå¯¼è‡´è‚ä¸­æ¯’ï¼Œè¿˜æœ‰å‰¯ä½œç”¨)</p><p>å¼€äº†3å¤©è¾“æ¶²çš„è¯</p><h2 id="9æœˆ12æ—¥"><a href="#9æœˆ12æ—¥" class="headerlink" title="9æœˆ12æ—¥"></a>9æœˆ12æ—¥</h2><p>è·å¾—ï¼š</p><ol><li>æ°¯åŒ–é’ (0.9%)æ³¨å°„æ¶²(åŒé¹¤250ml) X 4</li><li>ç›é…¸å·¦æ°§æ°Ÿæ²™æ˜Ÿæ³¨å°„æ¶²(å·¦å…‹) X 8</li></ol><p>ç»§ç»­è¾“äº†4å¤©è¯</p><h2 id="9æœˆ16æ—¥"><a href="#9æœˆ16æ—¥" class="headerlink" title="9æœˆ16æ—¥"></a>9æœˆ16æ—¥</h2><p>CTæ˜¾ç¤ºæ¯”è¾ƒä¸Šæ¬¡è‚ºéƒ¨æœ‰æ‰€å¸æ”¶</p><p>è·å¾—ï¼š</p><ol><li>ç›é…¸è«è¥¿æ²™æ˜Ÿç‰‡(æ‹œå¤ä¹) X 6</li><li>å¤æ–¹ç”²æ°§é‚£æ˜èƒ¶å›Š(é˜¿æ–¯ç¾) X 36</li><li>è‚ºåŠ›å’³åˆå‰‚ X 2</li><li>æ¡‰æŸ è’è‚ æº¶è½¯èƒ¶å›Š(åˆ‡è¯º) X 18</li></ol><p>å¼€äº†ä¸€å‘¨çš„è¯</p><h2 id="9æœˆ23æ—¥"><a href="#9æœˆ23æ—¥" class="headerlink" title="9æœˆ23æ—¥"></a>9æœˆ23æ—¥</h2><p>CT æ¯”è¾ƒä¸Šæ¬¡è‚ºéƒ¨è¾ƒä¸ºå¥½è½¬</p><p>ä¸ç”¨æ²»ç–—äº†</p><h2 id="ä¸€å‘¨å"><a href="#ä¸€å‘¨å" class="headerlink" title="ä¸€å‘¨å"></a>ä¸€å‘¨å</h2><p>å‰¯ä½œç”¨å¼€å§‹æ¥äº†ï¼Œè‚è§£æ¯’èƒ½åŠ›ä¸‹é™ï¼Œå¯¼è‡´å„ç§ä¸Šç«</p><p>ä¸çŸ¥é“æ˜¯ä¸æ˜¯æŠ—ç”Ÿç´ ç”¨å¤šäº†ï¼Œè‚ èƒƒä¹Ÿä¸å¥½äº†ï¼Œæ¶ˆåŒ–èƒ½åŠ›ä¸‹é™</p><h2 id="ä¸ºä»€ä¹ˆä¼šå¾—è‚ºç‚"><a href="#ä¸ºä»€ä¹ˆä¼šå¾—è‚ºç‚" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå¾—è‚ºç‚"></a>ä¸ºä»€ä¹ˆä¼šå¾—è‚ºç‚</h2><p>æˆ‘ä¸ºæ­¤é—®äº†åŒ»ç”Ÿï¼ŒåŒ»ç”Ÿæƒ…å†µå¾ˆå¤šï¼Œæ¯”å¦‚ä½ æŠµæŠ—åŠ›ä¸‹é™çš„æ—¶å€™è‚ºéƒ¨æœ¬æ¥å°±æœ‰çš„ç»†èŒå¾—ä¸åˆ°å‹åˆ¶ï¼Œåˆšå¥½é‚£ä¸ªæ—¶å€™å°±çˆ†å‘äº†ï¼Œå‘å±•æˆè‚ºç‚äº†</p><p>æƒ³æƒ³æˆ‘ç”Ÿæ´»ä½œæ¯ä¸æ˜¯å¾ˆå¥½ï¼Œå¿ƒæƒ…ä¹Ÿä¸æ˜¯å¾ˆå¥½</p><p>è¿˜æœ‰ä¸€ä¸ªåŸå› æˆ‘è®¤ä¸ºæ˜¯ä¸Šå®¶å…¬å¸ä¸€ç¾¤äººåœ¨å•æ‰€æŠ½çƒŸï¼Œè¿˜æŠŠçª—æˆ·éƒ½å…³èµ·æ¥äº†ï¼Œæ¯æ¬¡å»ä¸Šå•æ‰€éƒ½è¶…çº§å¤§çƒŸå‘³ï¼Œè¿˜æœ‰å¾ˆå¤šçƒŸé›¾ã€‚</p><p>è¿˜æœ‰åœ¨æˆ‘åº§ä½éš”å£çš„é‚£ä¸ªï¼ŒTMDä¸€ç›´åœ¨å“ªé‡Œå·å·çš„æŠ½ç”µå­çƒŸ</p><p>æ‰€æœ‰ç‚¹éƒ½é›†ä¸­åœ¨ä¸€èµ·çˆ†å‘äº†ï¼Œæˆ‘å¾—äº†è‚ºç‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å›å¿†9012å¹´ç”Ÿç—…ğŸ˜·è¿‡ç¨‹&quot;&gt;&lt;a href=&quot;#å›å¿†9012å¹´ç”Ÿç—…ğŸ˜·è¿‡ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;å›å¿†9012å¹´ç”Ÿç—…ğŸ˜·è¿‡ç¨‹&quot;&gt;&lt;/a&gt;å›å¿†9012å¹´ç”Ÿç—…ğŸ˜·è¿‡ç¨‹&lt;/h1&gt;&lt;h2 id=&quot;ç¬¬ä¸€å¤©&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€å¤©&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€å¤©&quot;&gt;&lt;/a&gt;ç¬¬ä¸€å¤©&lt;/h2&gt;&lt;p&gt;å–‰å’™æœ‰ä¸€ç‚¹ä¸èˆ’æœï¼Œæœ‰ä¸€ç‚¹å’³å—½ï¼ˆå¾ˆè½»çš„é‚£ç§å’³å—½ï¼‰ï¼Œæ²¡æœ‰å¾ˆåœ¨æ„ï¼Œæ™šä¸Šç¡è§‰æ—¶èººä¸‹ä¼šæœ‰ä¸€ç‚¹å’³å—½&lt;/p&gt;&lt;h2 id=&quot;ç¬¬äºŒå¤©&quot;&gt;&lt;a href=&quot;#ç¬¬äºŒå¤©&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬äºŒå¤©&quot;&gt;&lt;/a&gt;ç¬¬äºŒå¤©&lt;/h2&gt;&lt;p&gt;é¢‘ç‡æœ‰æ‰€å¢åŠ ï¼Œä½†ä¹Ÿä¸æ˜¯å¾ˆé¢‘ç¹ï¼Œæ™šä¸Šç¡è§‰æ—¶çš„æ—¶å€™èººä¸‹é¢‘ç‡å¤§å¹…å¢åŠ ï¼Œç¡ä¸ç€è§‰ï¼Œæ„è¯†åˆ°ä¸å¦™ï¼Œè§‰å¾—æ˜å¤©è¦å»åŒ»é™¢&lt;/p&gt;&lt;h2 id=&quot;ç¬¬ä¸‰å¤©&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸‰å¤©&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸‰å¤©&quot;&gt;&lt;/a&gt;ç¬¬ä¸‰å¤©&lt;/h2&gt;&lt;p&gt;æ„è¯†ä¸æ˜¯å¾ˆå¥½ï¼Œæ€•å†·ï¼Œæ‘¸æ‘¸é¢å¤´å·²ç»å‘çƒ§äº†&lt;/p&gt;&lt;p&gt;å»ç¤¾åŒºåŒ»é™¢ï¼Œé‡äº†ä½“æ¸©ï¼Œåšäº†ä¸ªè¡€å¸¸è§„ï¼Œ&lt;code&gt;ç™½ç»†èƒä¸Šå‡&lt;/code&gt;ï¼Œ&lt;code&gt;ç²’ç»†èƒä¸Šå‡&lt;/code&gt;ï¼Œè¯Šæ–­&lt;code&gt;æ€¥æ€§ä¸Šå‘¼å¸é“æ„ŸæŸ“&lt;/code&gt;ï¼Œå¼€äº†3å¤©çš„è¯ç‰©ï¼Œæœ‰é™æ¸©è¯ï¼Œå¤´å­¢ï¼Œè¿˜æœ‰ä¸€äº›å’½å–‰ç‚çš„&lt;/p&gt;&lt;p&gt;å›å»ååƒäº†è¦è¯ï¼Œä½“æ¸©ä½“æ¸©æ­£å¸¸ï¼Œä¸æ€•å†·äº†ï¼Œå’³å—½æœ‰æ‰€ç¼“è§£ï¼Œä½†æ™šä¸Šç¡è§‰èººä¸‹æ˜¯è¿˜æ˜¯ä¼šæœ‰å’³å—½&lt;/p&gt;
    
    </summary>
    
    
      <category term="æ—¥è®°æœ¬" scheme="https://aphage.me/categories/%E6%97%A5%E8%AE%B0%E6%9C%AC/"/>
    
    
  </entry>
  
  <entry>
    <title>JVM å‚æ•°è®¾ç½®</title>
    <link href="https://aphage.me/jvm-parameters/"/>
    <id>https://aphage.me/jvm-parameters/</id>
    <published>2019-05-20T14:30:46.000Z</published>
    <updated>2020-03-23T02:44:43.791Z</updated>
    
    <content type="html"><![CDATA[<p><code>JDK8-åºŸå¼ƒæ°¸ä¹…ä»£ï¼ˆPermGenï¼‰è¿æ¥å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰</code></p><p><code>ç§»é™¤æ°¸ä¹…ä»£æ˜¯ä¸ºèåˆHotSpot JVMä¸ JRockit VMè€Œåšå‡ºçš„åŠªåŠ›ï¼Œå› ä¸ºJRockitæ²¡æœ‰æ°¸ä¹…ä»£ï¼Œä¸éœ€è¦é…ç½®æ°¸ä¹…ä»£ã€‚</code></p><p>JVMå†…å­˜ä¸ºä¸¤å—ï¼šPermanentSapceå’ŒHeapSpace</p><p>PermanentSapceï¼šå­˜æ”¾ä»£ç çš„(å­—èŠ‚ç )</p><p>HeapSpaceï¼šå †</p><p>å…¶ä¸­HeapSpace= {Old + NEW {= Eden , from, to } }</p><p>ä¸€èˆ¬è®¾ç½®ä¸€ä¸‹å†…å­˜å¤§å°å’Œå›æ”¶ç­–ç•¥å°±è¡Œäº†</p><hr><a id="more"></a><h2 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h2><p>-serverï¼š</p><p>ä¸€å®šè¦ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåœ¨å¤šä¸ª CPU æ—¶æ€§èƒ½ä½³ï¼Œè¿˜æœ‰ä¸€ç§å«</p><p>-client:</p><p>çš„æ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä½†è¿è¡Œæ—¶æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡ä¸é«˜ï¼Œé€šå¸¸ç”¨äºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæˆ–å¼€å‘è°ƒè¯•ï¼Œåœ¨ 32 ä½ç¯å¢ƒä¸‹ç›´æ¥è¿è¡Œ Java ç¨‹åºé»˜è®¤å¯ç”¨è¯¥æ¨¡å¼ã€‚Server æ¨¡å¼çš„ç‰¹ç‚¹æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œä½†è¿è¡Œæ—¶æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡å¾ˆé«˜ï¼Œé€‚ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œåœ¨å…·æœ‰ 64 ä½èƒ½åŠ›çš„ JDK ç¯å¢ƒä¸‹é»˜è®¤å¯ç”¨è¯¥æ¨¡å¼ï¼Œå¯ä»¥ä¸é…ç½®è¯¥å‚æ•°ã€‚</p><p>-Xmsï¼š</p><p>è¡¨ç¤º Java åˆå§‹åŒ–å †çš„å¤§å°ï¼Œ-Xms ä¸-Xmx è®¾æˆä¸€æ ·çš„å€¼ï¼Œé¿å… JVM åå¤é‡æ–°ç”³è¯·å†…å­˜ï¼Œå¯¼è‡´æ€§èƒ½å¤§èµ·å¤§è½ï¼Œé»˜è®¤å€¼ä¸ºç‰©ç†å†…å­˜çš„ 1/64ï¼Œé»˜è®¤ï¼ˆMinHeapFreeRatioå‚æ•°å¯ä»¥è°ƒæ•´ï¼‰ç©ºä½™å †å†…å­˜å°äº 40% æ—¶ï¼ŒJVM å°±ä¼šå¢å¤§å †ç›´åˆ° -Xmx çš„æœ€å¤§é™åˆ¶ã€‚</p><p>-Xmxï¼š</p><p>è¡¨ç¤ºæœ€å¤§ Java å †å¤§å°ï¼Œå½“åº”ç”¨ç¨‹åºéœ€è¦çš„å†…å­˜è¶…å‡ºå †çš„æœ€å¤§å€¼æ—¶è™šæ‹Ÿæœºå°±ä¼šæç¤ºå†…å­˜æº¢å‡ºï¼Œå¹¶ä¸”å¯¼è‡´åº”ç”¨æœåŠ¡å´©æºƒï¼Œå› æ­¤ä¸€èˆ¬å»ºè®®å †çš„æœ€å¤§å€¼è®¾ç½®ä¸ºå¯ç”¨å†…å­˜çš„æœ€å¤§å€¼çš„80%ã€‚å¦‚ä½•çŸ¥é“æˆ‘çš„ JVM èƒ½å¤Ÿä½¿ç”¨æœ€å¤§å€¼ï¼Œä½¿ç”¨ java -Xmx512M -version å‘½ä»¤æ¥è¿›è¡Œæµ‹è¯•ï¼Œç„¶åé€æ¸çš„å¢å¤§ 512 çš„å€¼,å¦‚æœæ‰§è¡Œæ­£å¸¸å°±è¡¨ç¤ºæŒ‡å®šçš„å†…å­˜å¤§å°å¯ç”¨ï¼Œå¦åˆ™ä¼šæ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œé»˜è®¤å€¼ä¸ºç‰©ç†å†…å­˜çš„ 1/4ï¼Œé»˜è®¤ï¼ˆMinHeapFreeRatioå‚æ•°å¯ä»¥è°ƒæ•´ï¼‰ç©ºä½™å †å†…å­˜å¤§äº 70% æ—¶ï¼ŒJVM ä¼šå‡å°‘å †ç›´åˆ°-Xms çš„æœ€å°é™åˆ¶ã€‚</p><p>-Xssï¼š</p><p>è¡¨ç¤ºæ¯ä¸ª Java çº¿ç¨‹å †æ ˆå¤§å°ï¼ŒJDK 5.0 ä»¥åæ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º 1Mï¼Œä»¥å‰æ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º 256Kã€‚æ ¹æ®åº”ç”¨çš„çº¿ç¨‹æ‰€éœ€å†…å­˜å¤§å°è¿›è¡Œè°ƒæ•´ï¼Œåœ¨ç›¸åŒç‰©ç†å†…å­˜ä¸‹ï¼Œå‡å°è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹ï¼Œä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹æ•°è¿˜æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸èƒ½æ— é™ç”Ÿæˆï¼Œç»éªŒå€¼åœ¨ 3000~5000 å·¦å³ã€‚ä¸€èˆ¬å°çš„åº”ç”¨ï¼Œ å¦‚æœæ ˆä¸æ˜¯å¾ˆæ·±ï¼Œ åº”è¯¥æ˜¯128k å¤Ÿç”¨çš„ï¼Œå¤§çš„åº”ç”¨å»ºè®®ä½¿ç”¨ 256k æˆ– 512Kï¼Œä¸€èˆ¬ä¸æ˜“è®¾ç½®è¶…è¿‡ 1Mï¼Œè¦ä¸ç„¶å®¹æ˜“å‡ºç°out ofmemoryã€‚è¿™ä¸ªé€‰é¡¹å¯¹æ€§èƒ½å½±å“æ¯”è¾ƒå¤§ï¼Œéœ€è¦ä¸¥æ ¼çš„æµ‹è¯•ã€‚</p><p>-XX:NewSizeï¼šè®¾ç½®æ–°ç”Ÿä»£å†…å­˜å¤§å°ã€‚</p><p>-XX:MaxNewSizeï¼šè®¾ç½®æœ€å¤§æ–°ç”Ÿä»£æ–°ç”Ÿä»£å†…å­˜å¤§å°</p><p><del>-XX:PermSizeï¼šè®¾ç½®æŒä¹…ä»£å†…å­˜å¤§å°</del>JDK8 åè¢«æŠ›å¼ƒï¼Œä½¿ç”¨-XX:MetaspaceSizeæ›¿ä»£ï¼Œä¸€èˆ¬ä¸éœ€è¦è°ƒæ•´</p><p><del>-XX:MaxPermSizeï¼šè®¾ç½®æœ€å¤§å€¼æŒä¹…ä»£å†…å­˜å¤§å°ï¼Œæ°¸ä¹…ä»£ä¸å±äºå †å†…å­˜ï¼Œå †å†…å­˜åªåŒ…å«æ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚</del>JDK8 åè¢«æŠ›å¼ƒï¼Œä½¿ç”¨-XX:MaxMetaspaceSizeæ›¿ä»£,ä¸€èˆ¬ä¸éœ€è¦è°ƒæ•´</p><p><strong>-XX:MaxPermSize=size</strong></p><p>Sets the maximum permanent generation space size (in bytes). This option was deprecated in JDK 8, and superseded by the -XX:MaxMetaspaceSize option.</p><p><strong>-XX:PermSize=size</strong></p><p>Sets the space (in bytes) allocated to the permanent generation that triggers a garbage collection if it is exceeded. This option was deprecated un JDK 8, and superseded by the -XX:MetaspaceSize option.</p><p><strong>-XX:MaxMetaspaceSize=size</strong></p><p>Sets the maximum amount of native memory that can be allocated for class metadata. By default, the size is not limited. The amount of metadata for an application depends on the application itself, other running applications, and the amount of memory available on the system.</p><p>The following example shows how to set the maximum class metadata size to 256 MB:</p><p>-XX:MaxMetaspaceSize=256m</p><p><strong>-XX:MetaspaceSize=size</strong></p><p>Sets the size of the allocated class metadata space that will trigger a garbage collection the first time it is exceeded. This threshold for a garbage collection is increased or decreased depending on the amount of metadata used. The default size depends on the platform.</p><p>å› ä¸ºé»˜è®¤çš„ç±»çš„å…ƒæ•°æ®åˆ†é…åªå—æœ¬åœ°å†…å­˜å¤§å°çš„é™åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´æœ¬åœ°å†…å­˜å‰©ä½™å¤šå°‘ï¼Œç†è®ºä¸ŠMetaspaceå°±å¯ä»¥æœ‰å¤šå¤§</p><p>-XX:+AggressiveOptsï¼š</p><p>ä½œç”¨å¦‚å…¶åï¼ˆaggressiveï¼‰ï¼Œå¯ç”¨è¿™ä¸ªå‚æ•°ï¼Œåˆ™æ¯å½“ JDK ç‰ˆæœ¬å‡çº§æ—¶ï¼Œä½ çš„ JVM éƒ½ä¼šä½¿ç”¨æœ€æ–°åŠ å…¥çš„ä¼˜åŒ–æŠ€æœ¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</p><p>-XX:+DisableExplicitGCï¼š</p><p>ç¦ç”¨System.gc() ,åœ¨ ç¨‹åºä»£ç ä¸­ä¸å…è®¸æœ‰æ˜¾ç¤ºçš„è°ƒç”¨â€œSystem.gc()â€ã€‚æ¯æ¬¡åœ¨åˆ°æ“ä½œç»“æŸæ—¶æ‰‹åŠ¨è°ƒç”¨ System.gc() ä¸€ä¸‹ï¼Œä»˜å‡ºçš„ä»£ä»·å°±æ˜¯ç³»ç»Ÿå“åº”æ—¶é—´ä¸¥é‡é™ä½ï¼Œå°±å’Œå…³äº Xmsï¼ŒXmx é‡Œçš„è§£é‡Šçš„åŸç†ä¸€æ ·ï¼Œè¿™æ ·å»è°ƒç”¨ GC å¯¼è‡´ç³»ç»Ÿçš„ JVM å¤§èµ·å¤§è½ã€‚</p><p>-Xmnï¼š</p><p>æ–°ç”Ÿä»£çš„å†…å­˜ç©ºé—´å¤§å°ï¼Œå¯ä»¥æ›¿ä»£-XX:NewSize,-XX:MaxNewSize<br>å¯¹-XX:newSizeã€-XX:MaxnewSizeä¸¤ä¸ªå‚æ•°åŒæ—¶è¿›è¡Œé…ç½®ï¼ˆæ³¨æ„ï¼šJDK1.4ä¹‹åæ‰æœ‰è¯¥å‚æ•°ï¼‰ã€‚</p><p>-Duser.timezone=Asia/Shanghaiï¼š</p><p>è®¾ç½®ç”¨æˆ·æ‰€åœ¨æ—¶åŒºã€‚</p><p>-XX:NewRatioï¼š</p><p>å¹´è½»ä»£ï¼ˆåŒ…æ‹¬ Eden å’Œä¸¤ä¸ª Survivor åŒºï¼‰ä¸å¹´è€ä»£çš„æ¯”å€¼ï¼ˆé™¤å»æŒä¹…ä»£ï¼‰ï¼Œ-XX:NewRatio=4 è¡¨ç¤ºå¹´è½»ä»£ä¸å¹´è€ä»£æ‰€å æ¯”å€¼ä¸º 1:4ï¼Œå¹´è½»ä»£å æ•´ä¸ªå †æ ˆçš„ 1/5ï¼ŒXms=Xmx å¹¶ä¸”è®¾ç½®äº† Xmn çš„æƒ…å†µä¸‹ï¼Œè¯¥å‚æ•°ä¸éœ€è¦è¿›è¡Œè®¾ç½®ã€‚</p><p>-XX:SurvivorRatioï¼š</p><p>Eden åŒºä¸ Survivor åŒºçš„å¤§å°æ¯”å€¼ï¼Œè®¾ç½®ä¸º 8ï¼Œè¡¨ç¤º 2 ä¸ª Survivor åŒºï¼ˆJVM å †å†…å­˜å¹´è½»ä»£ä¸­é»˜è®¤æœ‰ 2 ä¸ªå¤§å°ç›¸ç­‰çš„ Survivor åŒºï¼‰ä¸ 1 ä¸ª Eden åŒºçš„æ¯”å€¼ä¸º 2:8ï¼Œå³ 1 ä¸ª Survivor åŒºå æ•´ä¸ªå¹´è½»ä»£å¤§å°çš„ 1/10ã€‚</p><p>-XX:+UseConcMarkSweepGCï¼š</p><p>è®¾ç½®å¹´è€ä»£ä¸ºå¹¶å‘æ”¶é›†ï¼Œå³ CMS gcï¼Œè¿™ä¸€ç‰¹æ€§åªæœ‰ jdk1.5<br>åç»­ç‰ˆæœ¬æ‰å…·æœ‰çš„åŠŸèƒ½ï¼Œå®ƒä½¿ç”¨çš„æ˜¯ gc ä¼°ç®—è§¦å‘å’Œ heap å ç”¨è§¦å‘ã€‚æˆ‘ä»¬çŸ¥é“é¢‘é¢‘ç¹çš„ GC ä¼šé€ é¢ JVM<br>çš„å¤§èµ·å¤§è½ä»è€Œå½±å“åˆ°ç³»ç»Ÿçš„æ•ˆç‡ï¼Œå› æ­¤ä½¿ç”¨äº† CMS GC åå¯ä»¥åœ¨ GC æ¬¡æ•°å¢å¤šçš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡ GC çš„å“åº”æ—¶é—´å´å¾ˆçŸ­ï¼Œæ¯”å¦‚è¯´ä½¿ç”¨äº† CMS<br>GC åç»è¿‡ jprofiler çš„è§‚å¯Ÿï¼ŒGC è¢«è§¦å‘æ¬¡æ•°éå¸¸å¤šï¼Œè€Œæ¯æ¬¡ GC è€—æ—¶ä»…ä¸ºå‡ æ¯«ç§’ã€‚</p><p>-XX:+UseParNewGCï¼š</p><p>å¯¹æ–°ç”Ÿä»£é‡‡ç”¨å¤šçº¿ç¨‹å¹¶è¡Œå›æ”¶ï¼Œè¿™æ ·æ”¶å¾—å¿«ï¼Œæ³¨æ„æœ€æ–°çš„ JVM ç‰ˆæœ¬ï¼Œå½“ä½¿ç”¨ -XX:+UseConcMarkSweepGC æ—¶ï¼Œ-XX:UseParNewGC ä¼šè‡ªåŠ¨å¼€å¯ã€‚å› æ­¤ï¼Œå¦‚æœå¹´è½»ä»£çš„å¹¶è¡Œ GC ä¸æƒ³å¼€å¯ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® -XXï¼š-UseParNewGC æ¥å…³æ‰ã€‚</p><p>èµ„æ–™</p><p><a href="https://docs.oracle.com/cd/E22289_01/html/821-1274/configuring-the-default-jvm-and-java-arguments.html" target="_blank" rel="noopener">Configuring the Default JVM and Java Argumentså®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html" target="_blank" rel="noopener">JVM å‚æ•°ä»‹ç»å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://blog.csdn.net/tree_ifconfig/article/details/81222196" target="_blank" rel="noopener">JVMä¸­çš„-Xms -Xmx -XX:newSize -XX:MaxnewSize -Xmn -XX:PermSize -XX:MaxPermSizeåŒºåˆ«ä»‹ç»</a></p><p><a href="https://blog.csdn.net/ljj_9/article/details/79145324" target="_blank" rel="noopener">ç”Ÿäº§ç¯å¢ƒçš„tomcatè°ƒä¼˜å’Œjvmè°ƒåŒ–</a></p><p><a href="https://www.cnblogs.com/andy-zhou/p/5327288.html" target="_blank" rel="noopener">JVMè°ƒä¼˜æ€»ç»“ï¼Œæ¯”è¾ƒè¯¦ç»†</a></p><p><a href="https://www.cnblogs.com/w-wfy/p/6415856.html" target="_blank" rel="noopener">javaâ€“jvmå¯åŠ¨çš„å‚æ•°</a></p><p><a href="https://www.cnblogs.com/sjxbg/p/9388615.html" target="_blank" rel="noopener">JVMåƒåœ¾å›æ”¶æœºåˆ¶ä¸å†…å­˜å›æ”¶</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;JDK8-åºŸå¼ƒæ°¸ä¹…ä»£ï¼ˆPermGenï¼‰è¿æ¥å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰&lt;/code&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;ç§»é™¤æ°¸ä¹…ä»£æ˜¯ä¸ºèåˆHotSpot JVMä¸ JRockit VMè€Œåšå‡ºçš„åŠªåŠ›ï¼Œå› ä¸ºJRockitæ²¡æœ‰æ°¸ä¹…ä»£ï¼Œä¸éœ€è¦é…ç½®æ°¸ä¹…ä»£ã€‚&lt;/code&gt;&lt;/p&gt;&lt;p&gt;JVMå†…å­˜ä¸ºä¸¤å—ï¼šPermanentSapceå’ŒHeapSpace&lt;/p&gt;&lt;p&gt;PermanentSapceï¼šå­˜æ”¾ä»£ç çš„(å­—èŠ‚ç )&lt;/p&gt;&lt;p&gt;HeapSpaceï¼šå †&lt;/p&gt;&lt;p&gt;å…¶ä¸­HeapSpace= {Old + NEW {= Eden , from, to } }&lt;/p&gt;&lt;p&gt;ä¸€èˆ¬è®¾ç½®ä¸€ä¸‹å†…å­˜å¤§å°å’Œå›æ”¶ç­–ç•¥å°±è¡Œäº†&lt;/p&gt;&lt;hr&gt;
    
    </summary>
    
    
      <category term="çƒ«çƒ«çƒ«çƒ«" scheme="https://aphage.me/categories/%E7%83%AB%E7%83%AB%E7%83%AB%E7%83%AB/"/>
    
    
  </entry>
  
  <entry>
    <title>Failed to start LSB</title>
    <link href="https://aphage.me/Failed-to-start-LSB/"/>
    <id>https://aphage.me/Failed-to-start-LSB/</id>
    <published>2019-05-01T22:53:25.000Z</published>
    <updated>2020-03-23T02:44:43.791Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸çŸ¥é“æ€ä¹ˆäº†ï¼Œç½‘ç»œçªç„¶ä¸è¡Œäº†</p><p>æŸ¥äº†ä¸€ä¸‹è¯´æ˜¯ç½‘å¡çš„macåœ°å€å’Œé…ç½®æ–‡ä»¶çš„ä¸ä¸€è‡´</p><p>çœ‹äº†ä¸‹æˆ‘çš„ç½‘å¡é…ç½® /etc/sysconfig/network-scripts/ifcfg-ens11</p><p>æˆ‘æ ¹æœ¬æ²¡æœ‰é…ç½®HWADDR å±æ€§</p><p>çœ‹åˆ°å…¶ä»–åœ°æ–¹è¯´æ˜¯NetworkManager æœåŠ¡å¯¼è‡´çš„</p><p>æˆ‘å…ˆæŠŠä»–åœæ­¢ï¼Œç„¶åå¯åŠ¨ç½‘ç»œæœåŠ¡ï¼Œåœ¨é‡æ–°å¯åŠ¨ç½‘ç»œç®¡ç†æœåŠ¡ï¼Œè§£å†³äº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop NetworkManager</span><br><span class="line">systemctl start network</span><br><span class="line">systemctl start NetworkManager</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¸çŸ¥é“æ€ä¹ˆäº†ï¼Œç½‘ç»œçªç„¶ä¸è¡Œäº†&lt;/p&gt;&lt;p&gt;æŸ¥äº†ä¸€ä¸‹è¯´æ˜¯ç½‘å¡çš„macåœ°å€å’Œé…ç½®æ–‡ä»¶çš„ä¸ä¸€è‡´&lt;/p&gt;&lt;p&gt;çœ‹äº†ä¸‹æˆ‘çš„ç½‘å¡é…ç½® /etc/sysconfig/network-scripts/ifcfg-ens11&lt;/p&gt;&lt;p&gt;æˆ‘æ ¹æœ¬æ²¡æœ‰é…ç½®HWADDR å±æ€§&lt;/p&gt;&lt;p&gt;çœ‹åˆ°å…¶ä»–
      
    
    </summary>
    
    
      <category term="çƒ«çƒ«çƒ«çƒ«" scheme="https://aphage.me/categories/%E7%83%AB%E7%83%AB%E7%83%AB%E7%83%AB/"/>
    
    
  </entry>
  
  <entry>
    <title>Gradle æ‰“åŒ…jarçš„å‡ ç§æ–¹å¼</title>
    <link href="https://aphage.me/Gradle-Generate-Jar/"/>
    <id>https://aphage.me/Gradle-Generate-Jar/</id>
    <published>2019-05-01T22:53:25.000Z</published>
    <updated>2020-03-23T02:44:43.791Z</updated>
    
    <content type="html"><![CDATA[<h2 id="jarä»»åŠ¡"><a href="#jarä»»åŠ¡" class="headerlink" title="jarä»»åŠ¡"></a>jarä»»åŠ¡</h2><p>æ‰“åŒ…æˆä¸€ä¸ªJar</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">jar &#123;</span><br><span class="line">    from &#123;</span><br><span class="line">        &#x2F;&#x2F;æ·»åŠ ä¾æ‡’åˆ°æ‰“åŒ…æ–‡ä»¶</span><br><span class="line">        &#x2F;&#x2F;configurations.compile.collect &#123; it.isDirectory() ? it : zipTree(it) &#125;</span><br><span class="line">        configurations.runtime.collect&#123;zipTree(it)&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    manifest &#123;</span><br><span class="line">        attributes &#39;Main-Class&#39;: appMainClass</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><p>æ‰“åŒ…æˆå¤šä¸ªJar</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">jar &#123;</span><br><span class="line">    manifest &#123;</span><br><span class="line">        attributes &#39;Main-Class&#39;: appMainClass</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task clearJar(type: Delete) &#123;</span><br><span class="line">    delete &#39;build&#x2F;libs&#x2F;lib&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task copyJar(type: Copy) &#123;</span><br><span class="line">    from configurations.runtime</span><br><span class="line">    into(&#39;build&#x2F;libs&#x2F;lib&#39;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task release(type: Copy, dependsOn: [build, clearJar, copyJar])</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå‘½ä»¤gradle releaseæˆ–è€…./gradlew relesseï¼Œå¯åœ¨build/libsæŸ¥çœ‹ç”Ÿæˆçš„jaråŒ…</p><p>ä¸¤ç§æ–¹å¼éƒ½å„æœ‰ç¼ºé™·ï¼Œæ‰“åŒ…æˆä¸€ä¸ªJarå½“ä¾æ‡’æ¯”è¾ƒå¤šæƒ…å†µä¸‹JaråŒ…ä¼šå¾ˆå¤§ï¼Œå…¶å®ƒå·¥ç¨‹è¦è¦å•ç‹¬å¼•ç”¨æŸä¸ªJarä¸æ–¹ä¾¿ï¼›æ‰“åŒ…æˆå¤šä¸ªJaræ²¡æœ‰å¯åŠ¨è„šæœ¬ï¼Œä¸ç†Ÿæ‚‰Javaçš„æ–°æ‰‹ä¸æ‡‚å¾—è¿è¡Œã€‚</p><h2 id="applicationæ’ä»¶"><a href="#applicationæ’ä»¶" class="headerlink" title="applicationæ’ä»¶"></a>applicationæ’ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &#39;application&#39;</span><br><span class="line">mainClassName &#x3D; appMainClass</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå‘½ä»¤<code>gradle build</code>æˆ–è€…<code>./gradlew build</code>ï¼ŒæŸ¥çœ‹<code>build/distributions</code>ä¼šæœ‰ä¸¤ä¸ªå‹ç¼©æ–‡ä»¶ï¼Œå‹ç¼©æ–‡ä»¶åŒ…å«äº†ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œbinä¸ºå¯åŠ¨è„šæœ¬ï¼Œlibåˆ™æ˜¯è½¯ä»¶jaråŒ…å’Œä¾èµ–ã€‚è¿˜å¯ä»¥æ‰§è¡Œ<code>./gradlew installDist</code>ç”Ÿæˆæœªå‹ç¼©æ–‡ä»¶ç›®å½•<code>build/install</code>ã€‚<br>è¿™ç§æ–¹å¼æœ€ä¸ºç®€å•ï¼Œä¸éœ€è¦æ·»åŠ å¤æ‚çš„è„šæœ¬ï¼Œæ‰“åŒ…æˆå¤šä¸ªjarå¹¶ç”Ÿæˆå¯åŠ¨è„šæœ¬å¯ä¸€é”®è¿è¡Œ</p><h2 id="å…¨éƒ¨è„šæœ¬å‚è€ƒ"><a href="#å…¨éƒ¨è„šæœ¬å‚è€ƒ" class="headerlink" title="å…¨éƒ¨è„šæœ¬å‚è€ƒ"></a>å…¨éƒ¨è„šæœ¬å‚è€ƒ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">def appMainClass &#x3D; &#39;HelloWorldKt&#39;</span><br><span class="line"></span><br><span class="line">apply plugin: &#39;java&#39;</span><br><span class="line">apply plugin: &#39;kotlin&#39;</span><br><span class="line"></span><br><span class="line">apply plugin: &#39;maven&#39;</span><br><span class="line">archivesBaseName &#x3D; &#39;app&#39;</span><br><span class="line">&#x2F;&#x2F; ç”Ÿæˆå¯åŠ¨è„šæœ¬æ‰“åŒ…</span><br><span class="line">&#x2F;&#x2F;apply plugin: &#39;application&#39;</span><br><span class="line">&#x2F;&#x2F;mainClassName &#x3D; appMainClass</span><br><span class="line"></span><br><span class="line">sourceCompatibility &#x3D; 1.8</span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile &quot;org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlin_version&quot;</span><br><span class="line">    testCompile group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.12&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">compileKotlin &#123;</span><br><span class="line">    kotlinOptions.jvmTarget &#x3D; &quot;1.8&quot;</span><br><span class="line">&#125;</span><br><span class="line">compileTestKotlin &#123;</span><br><span class="line">    kotlinOptions.jvmTarget &#x3D; &quot;1.8&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jar &#123;</span><br><span class="line">    configurations.runtime.each &#123; println it.path &#125;</span><br><span class="line">    println &quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;</span><br><span class="line">    configurations.compile.each &#123; println it.path &#125;</span><br><span class="line">    println &quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    from &#123;</span><br><span class="line">        &#x2F;&#x2F;æ·»åŠ ä¾æ‡’åˆ°æ‰“åŒ…æ–‡ä»¶</span><br><span class="line">        &#x2F;&#x2F;configurations.compile.collect &#123; it.isDirectory() ? it : zipTree(it) &#125;</span><br><span class="line">        configurations.runtime.collect &#123; zipTree(it) &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    manifest &#123;</span><br><span class="line">        attributes &#39;Main-Class&#39;: appMainClass</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task clearJar(type: Delete) &#123;</span><br><span class="line">    delete &#39;build&#x2F;libs&#x2F;lib&#39;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task copyJar(type: Copy) &#123;</span><br><span class="line">    from configurations.runtime</span><br><span class="line">    into(&#39;build&#x2F;libs&#x2F;lib&#39;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task release(type: Copy, dependsOn: [build, clearJar, copyJar])</span><br></pre></td></tr></table></figure><h2 id="Gradle-å°†ä¾èµ–å’Œèµ„æºæ–‡ä»¶æ‰“å…¥jaråŒ…"><a href="#Gradle-å°†ä¾èµ–å’Œèµ„æºæ–‡ä»¶æ‰“å…¥jaråŒ…" class="headerlink" title="Gradle - å°†ä¾èµ–å’Œèµ„æºæ–‡ä»¶æ‰“å…¥jaråŒ…"></a>Gradle - å°†ä¾èµ–å’Œèµ„æºæ–‡ä»¶æ‰“å…¥jaråŒ…</h2><p>ç”¨ä»¥ä¸‹build.gradleæ‰“åŒ…å‡ºæ¥çš„jaråŒ…ï¼Œä¾èµ–æ˜¯åˆ†ç¦»çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &#39;java&#39;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile &#39;commons-codec:commons-codec:1.4&#39;</span><br><span class="line">    compile &#39;commons-logging:commons-logging:1.1.1&#39;</span><br><span class="line">    compile &#39;com.google.code.gson:gson:2.4&#39;</span><br><span class="line">    compile &#39;org.apache.httpcomponents:httpclient:4.3.6&#39;</span><br><span class="line">    compile &#39;com.strategicgains:RestExpress:0.11.2&#39;</span><br><span class="line">    compile &#39;com.fasterxml.jackson.core:jackson-databind:2.6.4&#39;</span><br><span class="line">    compile &#39;com.fasterxml.jackson.core:jackson-core:2.6.4&#39;</span><br><span class="line">    compile &#39;com.fasterxml.jackson.core:jackson-annotations:2.6.4&#39;</span><br><span class="line">    compile &quot;ch.qos.logback:logback-core:1.1.3&quot;</span><br><span class="line">    compile &quot;ch.qos.logback:logback-classic:1.1.3&quot;</span><br><span class="line">    compile &#39;net.kencochrane.raven:raven-logback:6.0.0&#39;</span><br><span class="line">    compile &#39;net.kencochrane.raven:raven:6.0.0&#39;</span><br><span class="line">    compile &quot;org.slf4j:slf4j-api:1.7.13&quot;</span><br><span class="line">    compile &#39;com.rabbitmq:amqp-client:4.1.0&#39;</span><br><span class="line">    compile &#39;org.apache.commons:commons-lang3:3.4&#39;</span><br><span class="line">    compile &#39;commons-net:commons-net:3.4&#39;</span><br><span class="line">    compile &#39;org.zeromq:jeromq:0.3.5&#39;</span><br><span class="line">    compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])</span><br><span class="line">    compile project(&#39;:tc-das&#39;)</span><br><span class="line">    compile project(&#39;:result-compare&#39;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jar &#123;</span><br><span class="line">    manifest &#123;</span><br><span class="line">        attributes(</span><br><span class="line">                &quot;Manifest-Version&quot;: 1.0,</span><br><span class="line">                &quot;Main-Class&quot;: &quot;com.testbird.rio.Main&quot;,</span><br><span class="line">                &quot;Class-Path&quot;: configurations.compile.collect &#123; &quot;lib&#x2F;$&#123;it.name&#125;&quot; &#125;.join(&#39; &#39;))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†build.gradleä¿®æ”¹ä¸€ä¸‹ï¼Œå°±èƒ½å°†ä¾èµ–å’Œèµ„æºæ–‡ä»¶æ‰“å…¥jaråŒ…äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &#39;java&#39;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile &#39;commons-codec:commons-codec:1.4&#39;</span><br><span class="line">    compile &#39;commons-logging:commons-logging:1.1.1&#39;</span><br><span class="line">    compile &#39;com.google.code.gson:gson:2.4&#39;</span><br><span class="line">    compile &#39;org.apache.httpcomponents:httpclient:4.3.6&#39;</span><br><span class="line">    compile &#39;com.strategicgains:RestExpress:0.11.2&#39;</span><br><span class="line">    compile &#39;com.fasterxml.jackson.core:jackson-databind:2.6.4&#39;</span><br><span class="line">    compile &#39;com.fasterxml.jackson.core:jackson-core:2.6.4&#39;</span><br><span class="line">    compile &#39;com.fasterxml.jackson.core:jackson-annotations:2.6.4&#39;</span><br><span class="line">    compile &quot;ch.qos.logback:logback-core:1.1.3&quot;</span><br><span class="line">    compile &quot;ch.qos.logback:logback-classic:1.1.3&quot;</span><br><span class="line">    compile &#39;net.kencochrane.raven:raven-logback:6.0.0&#39;</span><br><span class="line">    compile &#39;net.kencochrane.raven:raven:6.0.0&#39;</span><br><span class="line">    compile &quot;org.slf4j:slf4j-api:1.7.13&quot;</span><br><span class="line">    compile &#39;com.rabbitmq:amqp-client:4.1.0&#39;</span><br><span class="line">    compile &#39;org.apache.commons:commons-lang3:3.4&#39;</span><br><span class="line">    compile &#39;commons-net:commons-net:3.4&#39;</span><br><span class="line">    compile &#39;org.zeromq:jeromq:0.3.5&#39;</span><br><span class="line">    compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])</span><br><span class="line">    compile project(&#39;:tc-das&#39;)</span><br><span class="line">    compile project(&#39;:result-compare&#39;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jar &#123;</span><br><span class="line">    manifest &#123;</span><br><span class="line">        attributes(</span><br><span class="line">                &quot;Manifest-Version&quot;: 1.0,</span><br><span class="line">                &quot;Main-Class&quot;: &quot;com.testbird.rio.Main&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    from &#123; configurations.compile.collect &#123; it.isDirectory() ? it : zipTree(it) &#125; &#125;</span><br><span class="line">    into(&#39;assets&#39;) &#123;</span><br><span class="line">        from &#39;assets&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a href="https://www.jianshu.com/p/5bb1e87df15f" target="_blank" rel="noopener">Gradle æ‰“åŒ…jarçš„å‡ ç§æ–¹å¼</a><br><a href="https://www.cnblogs.com/jyx140521/p/6855210.html" target="_blank" rel="noopener">Gradle - å°†ä¾èµ–å’Œèµ„æºæ–‡ä»¶æ‰“å…¥jaråŒ…</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;jarä»»åŠ¡&quot;&gt;&lt;a href=&quot;#jarä»»åŠ¡&quot; class=&quot;headerlink&quot; title=&quot;jarä»»åŠ¡&quot;&gt;&lt;/a&gt;jarä»»åŠ¡&lt;/h2&gt;&lt;p&gt;æ‰“åŒ…æˆä¸€ä¸ªJar&lt;/p&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;jar &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    from &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#x2F;&amp;#x2F;æ·»åŠ ä¾æ‡’åˆ°æ‰“åŒ…æ–‡ä»¶&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#x2F;&amp;#x2F;configurations.compile.collect &amp;#123; it.isDirectory() ? it : zipTree(it) &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        configurations.runtime.collect&amp;#123;zipTree(it)&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    manifest &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        attributes &amp;#39;Main-Class&amp;#39;: appMainClass&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="çƒ«çƒ«çƒ«çƒ«" scheme="https://aphage.me/categories/%E7%83%AB%E7%83%AB%E7%83%AB%E7%83%AB/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux ä¿®æ”¹æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°é‡</title>
    <link href="https://aphage.me/change-linux-max-open-file/"/>
    <id>https://aphage.me/change-linux-max-open-file/</id>
    <published>2019-05-01T22:53:25.000Z</published>
    <updated>2020-03-23T02:44:43.791Z</updated>
    
    <content type="html"><![CDATA[<p>æŸ¥çœ‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ulimit</span> -n</span><br></pre></td></tr></table></figure><p>ä¸´æ—¶ä¿®æ”¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ulimit</span> -n 65535</span><br></pre></td></tr></table></figure><a id="more"></a><p>æ°¸ä¹…ä¿®æ”¹</p><p>åœ¨<code>/etc/security/limits.conf</code>åŠ å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* soft nofile 65535</span><br><span class="line">* hard nofile 65535</span><br></pre></td></tr></table></figure><p><code>*</code> è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·</p><p>æ³¨æ„ç”¨æˆ·æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°é‡ä¸èƒ½å¤§äºç³»ç»Ÿè§„å®šçš„æ‰“å¼€æ•°é‡</p><p>æŸ¥çœ‹ç³»ç»Ÿæœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/fs/file-max</span><br></pre></td></tr></table></figure><p>ä¸´æ—¶ä¿®æ”¹ç³»ç»Ÿæœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°é‡ç›´æ¥ä¿®æ”¹ä¸Šé¢çš„æ–‡ä»¶ä¸­çš„æ•°å­—å³å¯</p><p>æ°¸ä¹…ä¿®æ”¹</p><p>åœ¨<code>/etc/sysctl.conf</code>åŠ å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.file-max &#x3D; 6553560</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦é€šè¿‡å®‰å…¨shellï¼ˆSSHï¼‰è®¿é—®</p><p>è¿˜åº”ç¼–è¾‘<code>/etc/ssh/sshd_config</code>å¹¶å–æ¶ˆæ³¨é‡Šä»¥ä¸‹è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#UseLogin no</span><br></pre></td></tr></table></figure><p>å¹¶å°†å…¶å€¼è®¾ç½®yesä¸ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UseLogin yes</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh restart</span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨è®¡ç®—æœºä»¥ä½¿é™åˆ¶ç”Ÿæ•ˆå¹¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯æ˜¯å¦å·²è®¾ç½®æ–°é™åˆ¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ulimit</span> -a</span><br></pre></td></tr></table></figure><p>With systemd (Recent Linux Distributions)</p><p>æ¯”å¦‚Centos 7</p><p>å¯ä»¥ä¿®æ”¹<code>/etc/systemd/system.conf</code>ä¸­çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DefaultLimitNOFILE</span><br></pre></td></tr></table></figure><p>é‡å¯åç”Ÿæ•ˆ</p><p>é’ˆå¯¹å•ç‹¬çš„è¿›ç¨‹å¯ä»¥è®¾ç½®<code>/etc/systemd/system/xxx.service.d/limits.conf</code></p><p><code>xxx</code>æ˜¯è¿›ç¨‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line">LimitNOFILE&#x3D;64000</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŸ¥çœ‹&lt;/p&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ulimit&lt;/span&gt; -n&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä¸´æ—¶ä¿®æ”¹&lt;/p&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ulimit&lt;/span&gt; -n 65535&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="çƒ«çƒ«çƒ«çƒ«" scheme="https://aphage.me/categories/%E7%83%AB%E7%83%AB%E7%83%AB%E7%83%AB/"/>
    
    
  </entry>
  
  <entry>
    <title>RabbitMQ å…¥é—¨æ•™ç¨‹</title>
    <link href="https://aphage.me/rabbitmq/"/>
    <id>https://aphage.me/rabbitmq/</id>
    <published>2019-05-01T22:53:25.000Z</published>
    <updated>2020-03-23T02:44:43.791Z</updated>
    
    <content type="html"><![CDATA[<ul><li><a href="#link1">ä»€ä¹ˆæ˜¯MQä¸ºä»€ä¹ˆä½¿ç”¨MQ</a></li><li><a href="#link2">ä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQ</a></li><li><a href="#link3">æ€ä¹ˆå®‰è£…RabbitMQ</a></li><li><a href="#link4">RabbitMQæ€ä¹ˆä½¿ç”¨</a></li><li><a href="#link5">RabbitMQæ¦‚å¿µ</a></li><li><a href="#link6">RabbitMQæ¶ˆæ¯äº‹ç‰©</a></li><li><a href="#link7">RabbitMQæ¶ˆæ¯ç¡®è®¤</a></li><li><a href="#link8">RabbitMQé…ç½®</a></li><li><a href="#link9">RabbitMQé›†ç¾¤</a></li><li><a href="#link10">å¸®åŠ©</a></li></ul><h1 id="å½“å‰ç‰ˆæœ¬"><a href="#å½“å‰ç‰ˆæœ¬" class="headerlink" title="å½“å‰ç‰ˆæœ¬"></a>å½“å‰ç‰ˆæœ¬</h1><blockquote><ul><li>CentOS 7</li><li>Erlang 21.x</li><li>RabbitMQ 3.7.14</li></ul></blockquote><a id="more"></a><div id="link1"></div><h2 id="ä»€ä¹ˆæ˜¯MQ-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MQ"><a href="#ä»€ä¹ˆæ˜¯MQ-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MQ" class="headerlink" title="ä»€ä¹ˆæ˜¯MQ,ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MQ"></a>ä»€ä¹ˆæ˜¯MQ,ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MQ</h2><p>å“ˆï¼ŒMQä½ éƒ½ä¸çŸ¥é“ï¼Œä½ è¿˜æ¥è¿™é‡Œï¼ŒèŒ¨~ å¿«å»ç™¾åº¦å•¦</p><p>ä¸ºä»€ä¹ˆä½¿ç”¨MQ</p><p>è¯è¯´ï¼Œä½ éƒ½ä¸çŸ¥é“ä¸ºä»€ä¹ˆä½¿ç”¨MQï¼Œé‚£ä½ è¿˜æ¥è¿™é‡Œå¹²å˜›ï¼Ÿ</p><hr><div id="link2"></div><h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQ"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQ" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQ"></a>ä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQ</h2><p>ç°åœ¨çš„å¸‚é¢ä¸Šæœ‰å¾ˆå¤šMQå¯ä»¥é€‰æ‹©ï¼Œæ¯”å¦‚ActiveMQã€ZeroMQã€Appche Qpidï¼Œé‚£é—®é¢˜æ¥äº†ä¸ºä»€ä¹ˆè¦é€‰æ‹©RabbitMQï¼Ÿ</p><blockquote><ol><li>é™¤äº†Qpidï¼ŒRabbitMQæ˜¯å”¯ä¸€ä¸€ä¸ªå®ç°äº†AMQPæ ‡å‡†çš„æ¶ˆæ¯æœåŠ¡å™¨ï¼›</li><li>å¯é æ€§ï¼ŒRabbitMQçš„æŒä¹…åŒ–æ”¯æŒï¼Œä¿è¯äº†æ¶ˆæ¯çš„ç¨³å®šæ€§ï¼›</li><li>é«˜å¹¶å‘ï¼ŒRabbitMQä½¿ç”¨äº†Erlangå¼€å‘è¯­è¨€ï¼ŒErlangæ˜¯ä¸ºç”µè¯äº¤æ¢æœºå¼€&gt; å‘4. çš„è¯­è¨€ï¼Œå¤©ç”Ÿè‡ªå¸¦é«˜å¹¶å‘å…‰ç¯ï¼Œå’Œé«˜å¯ç”¨ç‰¹æ€§ï¼›</li><li>é›†ç¾¤éƒ¨ç½²ç®€å•ï¼Œæ­£æ˜¯åº”ä¸ºErlangä½¿å¾—RabbitMQé›†ç¾¤éƒ¨ç½²å˜çš„è¶…çº§ç®€å•ï¼›</li><li>ç¤¾åŒºæ´»è·ƒåº¦é«˜ï¼Œæ ¹æ®ç½‘ä¸Šèµ„æ–™æ¥çœ‹ï¼ŒRabbitMQä¹Ÿæ˜¯é¦–é€‰ï¼›</li></ol></blockquote><hr><h3 id="MQ-å¯¹æ¯”"><a href="#MQ-å¯¹æ¯”" class="headerlink" title="MQ å¯¹æ¯”"></a>MQ å¯¹æ¯”</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€äº›æ•°æ®</p><p>é˜¿é‡Œå®˜ç½‘å¯¹æ¯”</p><table><thead><tr><th>åŠŸèƒ½</th><th>æ¶ˆæ¯é˜Ÿåˆ— RocketMQ</th><th>Apache RocketMQï¼ˆå¼€æºï¼‰</th><th>æ¶ˆæ¯é˜Ÿåˆ— Kafka</th><th>Apache Kafkaï¼ˆå¼€æºï¼‰</th><th>RabbitMQï¼ˆå¼€æºï¼‰</th></tr></thead><tbody><tr><td>å®‰å…¨é˜²æŠ¤</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>ä¸»å­è´¦å·æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å¯é æ€§</td><td>åŒæ­¥åˆ·ç›˜ - åŒæ­¥åŒå†™ - è¶…3ä»½æ•°æ®å‰¯æœ¬ - 99.99999999%</td><td>- åŒæ­¥åˆ·ç›˜ - å¼‚æ­¥åˆ·ç›˜ -</td><td>åŒæ­¥åˆ·ç›˜ - åŒæ­¥åŒå†™ - è¶…3ä»½æ•°æ®å‰¯æœ¬ - 99.99999999%</td><td>å¼‚æ­¥åˆ·ç›˜ï¼Œä¸¢æ•°æ®æ¦‚ç‡é«˜</td><td>åŒæ­¥åˆ·ç›˜</td></tr><tr><td>å¯ç”¨æ€§</td><td>- éå¸¸å¥½ï¼Œ99.95% - Always Writable</td><td>å¥½</td><td>- éå¸¸å¥½ï¼Œ99.95% - Always Writable</td><td>å¥½</td><td>å¥½</td></tr><tr><td>æ¨ªå‘æ‰©å±•èƒ½åŠ›</td><td>- æ”¯æŒå¹³æ»‘æ‰©å±• - æ”¯æŒç™¾ä¸‡çº§ QPS</td><td>æ”¯æŒ</td><td>- æ”¯æŒå¹³æ»‘æ‰©å±• - æ”¯æŒç™¾ä¸‡çº§ QPS</td><td>æ”¯æŒ</td><td>- é›†ç¾¤æ‰©å®¹ä¾èµ–å‰ç«¯ - LVS è´Ÿè½½å‡è¡¡è°ƒåº¦</td></tr><tr><td>Low Latency</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>æ¶ˆè´¹æ¨¡å‹</td><td>Push / Pull</td><td>Push / Pull</td><td>Push / Pull</td><td>Pull</td><td>Push / Pull</td></tr><tr><td>å®šæ—¶æ¶ˆæ¯</td><td>æ”¯æŒï¼ˆå¯ç²¾ç¡®åˆ°ç§’çº§ï¼‰</td><td>æ”¯æŒï¼ˆåªæ”¯æŒ18ä¸ªå›ºå®š Levelï¼‰</td><td>æš‚ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>äº‹åŠ¡æ¶ˆæ¯</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>é¡ºåºæ¶ˆæ¯</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æš‚ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å…¨é“¾è·¯æ¶ˆæ¯è½¨è¿¹</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æš‚ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>æ¶ˆæ¯å †ç§¯èƒ½åŠ›</td><td>ç™¾äº¿çº§åˆ« ä¸å½±å“æ€§èƒ½</td><td>ç™¾äº¿çº§åˆ« å½±å“æ€§èƒ½</td><td>ç™¾äº¿çº§åˆ« ä¸å½±å“æ€§èƒ½</td><td>å½±å“æ€§èƒ½</td><td>å½±å“æ€§èƒ½</td></tr><tr><td>æ¶ˆæ¯å †ç§¯æŸ¥è¯¢</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>æ¶ˆæ¯å›æº¯</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>æ¶ˆæ¯é‡è¯•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æš‚ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ­»ä¿¡é˜Ÿåˆ—</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ€§èƒ½ï¼ˆå¸¸è§„ï¼‰</td><td>éå¸¸å¥½ ç™¾ä¸‡çº§ QPS</td><td>éå¸¸å¥½ åä¸‡çº§ QPS</td><td>éå¸¸å¥½ ç™¾ä¸‡çº§ QPS</td><td>éå¸¸å¥½ ç™¾ä¸‡çº§ QPS</td><td>ä¸€èˆ¬ ä¸‡çº§ QPS</td></tr><tr><td>æ€§èƒ½ï¼ˆä¸‡çº§ Topic åœºæ™¯ï¼‰</td><td>éå¸¸å¥½ ç™¾ä¸‡çº§ QPS</td><td>éå¸¸å¥½ åä¸‡çº§ QPS</td><td>éå¸¸å¥½ ç™¾ä¸‡çº§ QPS</td><td>ä½</td><td>ä½</td></tr><tr><td>æ€§èƒ½ï¼ˆæµ·é‡æ¶ˆæ¯å †ç§¯åœºæ™¯ï¼‰</td><td>éå¸¸å¥½ ç™¾ä¸‡çº§ QPS</td><td>éå¸¸å¥½ åä¸‡çº§ QPS</td><td>éå¸¸å¥½ ç™¾ä¸‡çº§ QPS</td><td>ä½</td><td>ä½</td></tr></tbody></table><hr><table><thead><tr><th>xxxxxxxxxxxxxxxxxx</th><th>ActiveMQ</th><th>RabbitMQ</th><th>RocketMq</th><th>ZeroMQ</th><th>Kafka</th></tr></thead><tbody><tr><td>å…³æ³¨åº¦</td><td>é«˜</td><td>é«˜</td><td>ä¸­</td><td>ä¸­</td><td>é«˜</td></tr><tr><td>æˆç†Ÿåº¦</td><td>æˆç†Ÿ</td><td>æˆç†Ÿ</td><td>æ¯”è¾ƒæˆç†Ÿ</td><td>ä¸æˆç†Ÿ</td><td>æˆç†Ÿ</td></tr><tr><td>æ‰€å±ç¤¾åŒº/å…¬å¸</td><td>Apache</td><td>Mozilla Public License</td><td>Alibaba Apache</td><td></td><td></td></tr><tr><td>ç¤¾åŒºæ´»è·ƒåº¦</td><td>é«˜</td><td>é«˜</td><td>ä¸­</td><td>ä½</td><td>é«˜</td></tr><tr><td>æ–‡æ¡£</td><td>å¤š</td><td>å¤š</td><td>ä¸­</td><td>ä¸­</td><td>å¤š</td></tr><tr><td>ç‰¹ç‚¹</td><td>åŠŸèƒ½é½å…¨ï¼Œè¢«å¤§é‡å¼€æºé¡¹ç›®ä½¿ç”¨</td><td>ç”±äºErlang è¯­è¨€çš„å¹¶å‘èƒ½åŠ›ï¼Œæ€§èƒ½å¾ˆå¥½</td><td>å„ä¸ªç¯èŠ‚åˆ†å¸ƒå¼æ‰©å±•è®¾è®¡ï¼Œä¸»ä» HAï¼›æ”¯æŒä¸Šä¸‡ä¸ªé˜Ÿåˆ—ï¼›å¤šç§æ¶ˆè´¹æ¨¡å¼ï¼›æ€§èƒ½å¾ˆå¥½</td><td>ä½å»¶æ—¶ï¼Œé«˜æ€§èƒ½ï¼Œæœ€é«˜ 43ä¸‡æ¡æ¶ˆæ¯æ¯ç§’</td><td></td></tr><tr><td>æˆæƒæ–¹å¼</td><td>å¼€æº</td><td>å¼€æº</td><td>å¼€æº</td><td>å¼€æº</td><td>å¼€æº</td></tr><tr><td>å¼€å‘è¯­è¨€</td><td>Java</td><td>Erlang</td><td>Java</td><td>C</td><td></td></tr><tr><td>æ”¯æŒçš„åè®®</td><td>OpenWireã€STOMPã€RESTã€XMPPã€AMQP</td><td>AMQP è‡ªå·±å®šä¹‰çš„ä¸€å¥—(ç¤¾åŒºæä¾›JMSâ€“ä¸æˆç†Ÿ)</td><td>TCPã€UDP</td><td></td><td></td></tr><tr><td>å®¢æˆ·ç«¯æ”¯æŒè¯­è¨€</td><td>Javaã€Cã€C++ã€Pythonã€PHPã€Perlã€.net ç­‰</td><td>Javaã€Cã€C++ã€Pythonã€PHPã€Perlã€.net ç­‰</td><td>Java C++ï¼ˆä¸æˆç†Ÿï¼‰</td><td>python javaã€ phpã€.net ç­‰</td><td></td></tr><tr><td>æŒä¹…åŒ–</td><td>å†…å­˜ã€æ–‡ä»¶ã€æ•°æ®åº“</td><td>å†…å­˜ã€æ–‡ä»¶</td><td>ç£ç›˜æ–‡ä»¶</td><td>åœ¨æ¶ˆæ¯å‘é€ç«¯ä¿å­˜</td><td></td></tr><tr><td>äº‹åŠ¡</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td></td></tr><tr><td>é›†ç¾¤</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td></td></tr><tr><td>è´Ÿè½½å‡è¡¡</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td></td></tr><tr><td>ç®¡ç†ç•Œé¢</td><td>ä¸€èˆ¬</td><td>å¥½</td><td>æ— ç¤¾åŒºæœ‰ web console å®ç°</td><td>æ— </td><td></td></tr><tr><td>éƒ¨ç½²æ–¹å¼</td><td>ç‹¬ç«‹ã€åµŒå…¥</td><td>ç‹¬ç«‹</td><td>ç‹¬ç«‹</td><td>ç‹¬ç«‹</td><td></td></tr><tr><td>é¡ºåº</td><td>æ— æ³•ä¿è¯ä¸¥æ ¼çš„é¡ºåº</td><td></td><td>ä¿è¯ä¸¥æ ¼çš„æ¶ˆè´¹é¡ºåº</td><td></td><td></td></tr><tr><td>ä¼˜ç‚¹</td><td>æˆç†Ÿçš„äº§å“ï¼Œå·²ç»åœ¨å¾ˆå¤šå…¬å¸å¾—åˆ°åº”ç”¨ï¼ˆéå¤§è§„æ¨¡åœºæ™¯ï¼‰ã€‚æœ‰è¾ƒå¤šçš„æ–‡æ¡£ã€‚å„ç§åè®®æ”¯æŒè¾ƒå¥½ï¼Œæœ‰å¤šé‡è¯­è¨€çš„æˆç†Ÿçš„å®¢æˆ·ç«¯ï¼›</td><td>ç”±äºerlangè¯­è¨€çš„ç‰¹æ€§ï¼Œmq æ€§èƒ½è¾ƒå¥½ï¼›ç®¡ç†ç•Œé¢è¾ƒä¸°å¯Œï¼Œåœ¨äº’è”ç½‘å…¬å¸ä¹Ÿæœ‰è¾ƒå¤§è§„æ¨¡çš„åº”ç”¨ï¼›æ”¯æŒamqpç³»è¯¶ï¼Œæœ‰å¤šä¸­è¯­è¨€ä¸”æ”¯æŒ amqp çš„å®¢æˆ·ç«¯å¯ç”¨</td><td>æ¨¡å‹ç®€å•ï¼Œæ¥å£æ˜“ç”¨ï¼ˆJMS çš„æ¥å£å¾ˆå¤šåœºåˆå¹¶ä¸å¤ªå®ç”¨ï¼‰ã€‚åœ¨é˜¿é‡Œå¤§è§„æ¨¡åº”ç”¨ã€‚ç›®å‰æ”¯ä»˜å®ä¸­çš„ä½™é¢å®ç­‰æ–°å…´äº§å“å‡ä½¿ç”¨rocketmqã€‚é›†ç¾¤è§„æ¨¡å¤§æ¦‚åœ¨50 å°å·¦å³ï¼Œå•æ—¥å¤„ç†æ¶ˆæ¯ä¸Šç™¾äº¿ï¼›æ€§èƒ½éå¸¸å¥½ï¼Œå¯ä»¥å¤§é‡å †ç§¯æ¶ˆæ¯åœ¨broker ä¸­ï¼›æ”¯æŒå¤šç§æ¶ˆè´¹ï¼ŒåŒ…æ‹¬é›†ç¾¤æ¶ˆè´¹ã€å¹¿æ’­æ¶ˆè´¹ç­‰ã€‚å¼€å‘åº¦è¾ƒæ´»è·ƒï¼Œç‰ˆæœ¬æ›´æ–°å¾ˆå¿«ã€‚</td><td></td><td></td></tr><tr><td>ç¼ºç‚¹</td><td>æ ¹æ®å…¶ä»–ç”¨æˆ·åé¦ˆï¼Œä¼šå‡ºè«åå…¶å¦™çš„é—®é¢˜ï¼Œåˆ‡ä¼šä¸¢å¤±æ¶ˆæ¯ã€‚ å…¶é‡å¿ƒæ”¾åˆ°activemq6.0 äº§å“â€”apollo ä¸Šå»äº†ï¼Œç›®å‰ç¤¾åŒºä¸æ´»è·ƒï¼Œä¸”å¯¹ 5.x ç»´æŠ¤è¾ƒå°‘;Activemq ä¸é€‚åˆç”¨äºä¸Šåƒä¸ªé˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯</td><td>erlangè¯­è¨€éš¾åº¦è¾ƒå¤§ã€‚é›†ç¾¤ä¸æ”¯æŒåŠ¨æ€æ‰©å±•ã€‚</td><td>æ²¡æœ‰åœ¨ mq æ ¸å¿ƒä¸­å»å®ç°JMS ç­‰æ¥å£</td><td></td><td></td></tr></tbody></table><hr><h3 id="çŸ¥é“äº†å—ï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQï¼ï¼ï¼ï¼ï¼ï¼"><a href="#çŸ¥é“äº†å—ï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQï¼ï¼ï¼ï¼ï¼ï¼" class="headerlink" title="çŸ¥é“äº†å—ï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQï¼ï¼ï¼ï¼ï¼ï¼"></a>çŸ¥é“äº†å—ï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQï¼ï¼ï¼ï¼ï¼ï¼</h3><p><strong>(å°å£°çš„è¯´ï¼šå…¶å®ï¼ï¼ï¼æˆ‘ä¹Ÿæ²¡ç”¨è¿‡MQï¼Œå„å¤§å‚å•†éƒ½å®ç°äº†ä¸€å¥—ï¼Œæ‰€ä»¥æˆ‘å‡†å¤‡é€‰æ‹©ä¸€ä¸ªå…ˆäº†è§£ä¸€ä¸‹)</strong></p><p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQå‘¢ï¼Ÿ</strong></p><blockquote><ul><li><strong>å› ä¸ºæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦MQï¼Œé€‰æ‹©çš„åŸå› å˜›ï¼Œæ˜¯RabbitMQæ—¶é—´æ¯”è¾ƒä¹…äº†ï¼Œèµ„æ–™æ¯”è¾ƒå¤šï¼Œåˆšå…¥æ‰‹è‚¯å®šé€‰æ‹©èµ„æ–™æ¯”è¾ƒå¤šçš„æœ€å¥½</strong></li><li><strong>è¿˜æœ‰Rabbitæ˜¯å…”å­çš„æ„æ€å˜›ï¼Œä¸€æƒ³åˆ°å…”å­ï¼Œå¾ˆå¯çˆ±å•Šï¼ï¼ï¼</strong></li></ul></blockquote><hr><div id="link3"></div><h2 id="æ€ä¹ˆå®‰è£…RabbitMQ"><a href="#æ€ä¹ˆå®‰è£…RabbitMQ" class="headerlink" title="æ€ä¹ˆå®‰è£…RabbitMQ"></a>æ€ä¹ˆå®‰è£…RabbitMQ</h2><p>æ‰“å¼€<a href="https://www.rabbitmq.com/" target="_blank" rel="noopener">å®˜ç½‘</a>çœ‹äº†å—ï¼Ÿ</p><p>Download + Installation</p><p>å“ˆï¼ï¼ï¼æ²¡çœ‹åˆ°ï¼Œä½ ç½‘é€Ÿå¤ªå·®äº†å§ï¼Œé‚£ä½ ç­‰ä¸€ä¸‹å§ï¼</p><p>è¿˜æ˜¯æ²¡çœ‹åˆ°ï¼å“¦ï¼Œé‚£ä½ ç‚¹å‡»ä¸€ä¸‹<a href="https://www.rabbitmq.com/#getstarted" target="_blank" rel="noopener">æˆ‘</a>å§ï¼</p><p>å•Š<del>~ ~åˆ«ç‚¹äº†</del>å•Š<del>~</del>ï½(ï¿£â–½ï¿£ï½)</p><blockquote><p>æˆ‘æ€€ç–‘ä½ åœ¨å¼€è½¦ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰è¯æ®</p></blockquote><hr><p>OKï¼Œç°åœ¨åˆ°<a href="https://www.rabbitmq.com/download.html" target="_blank" rel="noopener">è¿™é‡Œ</a>äº†</p><p>æˆ‘çš„æ˜¯CentOS7 æ‰€ä»¥æˆ‘ç‚¹å‡»<a href="https://www.rabbitmq.com/install-rpm.html" target="_blank" rel="noopener">è¿™ä¸ª</a></p><p>å…¶ä»–çš„ç³»ç»Ÿè‡ªå·±ç ”ç©¶äº†~ RabbitMQ æ˜¯Erlangeå¼€å‘äº†ï¼Œæ‰€ä»¥è¦å…ˆå®‰è£…Erlangï¼Œç‰ˆæœ¬æœ‰è¦æ±‚å“¦</p><p>è¿›æ¥åçœ‹åˆ°<a href="https://www.rabbitmq.com/install-rpm.html#install-erlang" target="_blank" rel="noopener">Install Erlang</a></p><p>ä¸‹é¢æœ‰ä¸€ä¸ª<a href="https://github.com/rabbitmq/erlang-rpm" target="_blank" rel="noopener">a package</a> çš„ä¸€ä¸ªé“¾æ¥ï¼Œç‚¹å‡»è·³è½¬åˆ°äº†Github</p><p>å¾€ä¸‹é¢æ‹‰ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©æœ€æ–°ç‰ˆæœ¬çš„Erlang æºï¼ŒErlang 21.xï¼Œå½“å‰ç‰ˆæœ¬çš„RabbitMQ3.7.14 ä¹Ÿè¦æ±‚Erlang &gt;= 19.3</p><p>åœ¨å¾€ä¸‹æ‹‰ï¼Œå¯ä»¥çœ‹åˆ°æŒ‡å®šç‰ˆæœ¬çš„Erlang å®‰è£…æº</p><p>æºå®‰è£…å¥½åƒæœ‰ä¸¤ç§ Package Cloudã€Bintray Yum Repositories</p><p>æˆ‘é€‰æ‹©ç¬¬ä¸€ç§çš„ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰æ“ä½œè¿™ä¸ª<br>Package Cloud supports a variety of options for RPM package installation: from Yum configuration to shell scripts to Chef and Puppet.</p><p>See Package Cloud repository installation page for details.</p><p>ä¹Ÿå®‰è£…å¥½äº†~å˜› å†å¾€ä¸‹æ‹‰å°±èƒ½çœ‹åˆ°Bintray Yum Repositoriesï¼Œä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæºå®‰è£…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># In &#x2F;etc&#x2F;yum.repos.d&#x2F;rabbitmq_erlang.repo</span><br><span class="line">[rabbitmq_erlang]</span><br><span class="line">name&#x3D;rabbitmq_erlang</span><br><span class="line">baseurl&#x3D;https:&#x2F;&#x2F;packagecloud.io&#x2F;rabbitmq&#x2F;erlang&#x2F;el&#x2F;7&#x2F;$basearch</span><br><span class="line">repo_gpgcheck&#x3D;1</span><br><span class="line">gpgcheck&#x3D;0</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;packagecloud.io&#x2F;rabbitmq&#x2F;erlang&#x2F;gpgkey</span><br><span class="line">sslverify&#x3D;1</span><br><span class="line">sslcacert&#x3D;&#x2F;etc&#x2F;pki&#x2F;tls&#x2F;certs&#x2F;ca-bundle.crt</span><br><span class="line">metadata_expire&#x3D;300</span><br><span class="line">  </span><br><span class="line">[rabbitmq_erlang-source]</span><br><span class="line">name&#x3D;rabbitmq_erlang-source</span><br><span class="line">baseurl&#x3D;https:&#x2F;&#x2F;packagecloud.io&#x2F;rabbitmq&#x2F;erlang&#x2F;el&#x2F;7&#x2F;SRPMS</span><br><span class="line">repo_gpgcheck&#x3D;1</span><br><span class="line">gpgcheck&#x3D;0</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;packagecloud.io&#x2F;rabbitmq&#x2F;erlang&#x2F;gpgkey</span><br><span class="line">sslverify&#x3D;1</span><br><span class="line">sslcacert&#x3D;&#x2F;etc&#x2F;pki&#x2F;tls&#x2F;certs&#x2F;ca-bundle.crt</span><br><span class="line">metadata_expire&#x3D;300</span><br></pre></td></tr></table></figure><p>é…ç½®å¥½åå°±å®‰è£…äº†~</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y erlang</span><br></pre></td></tr></table></figure><p>å®‰è£…å¥½Erlangåå¼€å§‹å®‰è£…RabbitMQäº†</p><p>æˆ‘ä»¬å›åˆ°<a href="https://www.rabbitmq.com/install-rpm.html#bintray" target="_blank" rel="noopener">è¿™é‡Œï¼Œå¿«ç‚¹å‡»æˆ‘å•Š~</a></p><p>è¿™é‡Œä½¿ç”¨Bintray å®‰è£…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https:&#x2F;&#x2F;github.com&#x2F;rabbitmq&#x2F;signing-keys&#x2F;releases&#x2F;download&#x2F;2.0&#x2F;rabbitmq-release-signing-key.asc</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># In &#x2F;etc&#x2F;yum.repos.d&#x2F;rabbitmq.repo</span><br><span class="line">[bintray-rabbitmq-server]</span><br><span class="line">name&#x3D;bintray-rabbitmq-rpm</span><br><span class="line">baseurl&#x3D;https:&#x2F;&#x2F;dl.bintray.com&#x2F;rabbitmq&#x2F;rpm&#x2F;rabbitmq-server&#x2F;v3.7.x&#x2F;el&#x2F;7&#x2F;</span><br><span class="line">gpgcheck&#x3D;0</span><br><span class="line">repo_gpgcheck&#x3D;0</span><br><span class="line">enabled&#x3D;1</span><br></pre></td></tr></table></figure><p>å†™å®Œé…ç½®åï¼Œå®‰è£…ï¼Œæ²¡æœ‰æŒ‡å®šç‰ˆæœ¬å·é»˜è®¤å®‰è£…æœ€æ–°ç‰ˆ,æˆ‘è¿™é‡Œçš„æ˜¯ <strong>3.7.14</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y rabbitmq-server.noarch</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨æœåŠ¡RabbitMQå™¨"><a href="#å¯åŠ¨æœåŠ¡RabbitMQå™¨" class="headerlink" title="å¯åŠ¨æœåŠ¡RabbitMQå™¨"></a>å¯åŠ¨æœåŠ¡RabbitMQå™¨</h3><p>è®¾ç½®å¼€æœºå¯åŠ¨ï¼Œé»˜è®¤æ˜¯ä¸ä¼šå¼€æœºå¯åŠ¨ï¼Œå¤§å®¶è‡ªå·±é€‰æ‹©</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig rabbitmq-server on</span><br></pre></td></tr></table></figure><p>å¯åŠ¨RabbitMQï¼ŒCentos7 å·²ç»ä½¿ç”¨systemctl æ›¿ä»£ service å‘½ä»¤äº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨</span></span><br><span class="line">systemctl start rabbitmq-server</span><br><span class="line">  </span><br><span class="line"><span class="comment"># é‡æ–°å¯åŠ¨</span></span><br><span class="line">systemctl restart rabbitmq-server</span><br><span class="line">  </span><br><span class="line"><span class="comment"># åœæ­¢</span></span><br><span class="line">systemctl stop rabbitmq-server</span><br><span class="line">  </span><br><span class="line"><span class="comment"># çŠ¶æ€</span></span><br><span class="line">systemctl status rabbitmq-server</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯æ˜¯ä½¿ç”¨RabbitMQ æä¾›çš„å‘½ä»¤æŸ¥çœ‹çŠ¶æ€ï¼Œæ›´å¤šå…³äºrabbitmqctl å‘½ä»¤è¯·<a href="https://www.rabbitmq.com/rabbitmqctl.8.html" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œ</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl status</span><br></pre></td></tr></table></figure><p>æˆ‘é€‰æ‹©å¼€å¯Web ç®¡ç†æ’ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rabbitmq-plugins <span class="built_in">enable</span> rabbitmq_management</span><br><span class="line">  </span><br><span class="line">rabbitmq-plugins <span class="built_in">disable</span> rabbitmq_management</span><br><span class="line">  </span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šæ’ä»¶çš„å¯ç”¨å’Œå…³é—­éƒ½ä¸ä¼šå½±å“å½“å‰è¿è¡ŒrabbitmqèŠ‚ç‚¹ã€‚å¿…é¡»é‡æ–°å¯åŠ¨ä¹‹åæ‰ä¼šå½±å“ã€‚</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€ <a href="http://localhost:15672/" target="_blank" rel="noopener">http://localhost:15672/</a></p><p>è¾“å…¥guest guest</p><p>é»˜è®¤çš„ç”¨æˆ·gueståªèƒ½åœ¨å®‰è£…RabbitMQçš„æœºå™¨ä¸Šç™»å½•ï¼Œåœ¨å…¶ä»–æœºå™¨ç™»å½•éœ€è¦æ–°å¢ç”¨æˆ·ï¼,å½“ç„¶åˆ©ç”¨é…ç½®æ–‡ä»¶ä¹Ÿå¯ä»¥å®ç°è®©guestç”¨æˆ·åœ¨å…¶ä»–æœºå™¨ç™»é™†ï¼ï¼</p><p>è¿™é‡Œæˆ‘é€‰æ‹©æ–°å»ºç”¨æˆ·</p><p>æ·»åŠ ç”¨æˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl add_user username password</span><br></pre></td></tr></table></figure><p>è®¾ç½®ç”¨æˆ·æ ‡ç­¾ï¼ˆadministratorï¼‰ï¼Œç”¨æˆ·æ ‡ç­¾çš„ç”¨å¤„ä¸»è¦æ˜¯ç®¡ç†æ’ä»¶ä½¿ç”¨çš„ï¼Œè®¾ç½®administrator æ˜¯è®©è¿™ä¸ªç”¨æˆ·å¯ä»¥è®¿é—® Webç«¯ç®¡ç†ç¨‹åº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl set_user_tags username administrator</span><br></pre></td></tr></table></figure><p>è®¾ç½® è™šæ‹Ÿä¸»æœºæƒé™ï¼ŒRabbitMQ æ˜¯ä½¿ç”¨è™šæ‹Ÿä¸»æœºéš”ç¦»çš„ï¼Œæ¯ä¸€ä¸ªè™šæ‹Ÿä¸»æœºéƒ½ç”¨è‡ªå·±çš„äº¤æ¢æœºå’Œé˜Ÿåˆ—ï¼Œæ¯ä¸ªè™šæ‹Ÿä¸»æœºäº’ç›¸éš”ç¦»</p><p>/ æ˜¯é»˜è®¤çš„è™šæ‹Ÿä¸»æœº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl set_permissions username -p / <span class="string">".*"</span> <span class="string">".*"</span> <span class="string">".*"</span></span><br></pre></td></tr></table></figure><p>è®¾ç½®å®Œåå°±å¯ä»¥è¿œç¨‹ä½¿ç”¨è¿™ä¸ªç”¨æˆ·ç™»å½•Web ç®¡ç†ç«¯äº†</p><hr><h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><h4 id="User-ç”¨æˆ·"><a href="#User-ç”¨æˆ·" class="headerlink" title="User | ç”¨æˆ·"></a><a href="https://www.rabbitmq.com/rabbitmqctl.8.html#User_Management" target="_blank" rel="noopener">User | ç”¨æˆ·</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line">rabbitctl list_users</span><br><span class="line">  </span><br><span class="line"><span class="comment"># æ·»åŠ ç”¨æˆ·</span></span><br><span class="line">rabbitmqctl add_user username password</span><br><span class="line">  </span><br><span class="line"><span class="comment"># åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">rabbitmqctl delete_user username</span><br><span class="line">  </span><br><span class="line"><span class="comment"># ä¿®æ”¹å¯†ç </span></span><br><span class="line">rabbitmqctl change_password username password</span><br><span class="line">  </span><br><span class="line"><span class="comment"># æ¸…é™¤å¯†ç </span></span><br><span class="line">rabbitmqcaltl clear_password username</span><br><span class="line">  </span><br><span class="line"><span class="comment"># è®¾ç½®æ ‡ç­¾</span></span><br><span class="line">rabbitmqctl set_user_tags username administrator</span><br><span class="line">  </span><br><span class="line"><span class="comment"># æ¸…ç©ºæ ‡ç­¾</span></span><br><span class="line">rabbitmqctl set_user_tags username</span><br></pre></td></tr></table></figure><h4 id="Access-Control-è®¿é—®æ§åˆ¶"><a href="#Access-Control-è®¿é—®æ§åˆ¶" class="headerlink" title="Access Control | è®¿é—®æ§åˆ¶"></a><a href="https://www.rabbitmq.com/rabbitmqctl.8.html#Access_Control" target="_blank" rel="noopener">Access Control | è®¿é—®æ§åˆ¶</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è™šæ‹Ÿä¸»æœºåˆ—è¡¨</span></span><br><span class="line">rabbitmqctl list_vhosts</span><br><span class="line">  </span><br><span class="line"><span class="comment"># æ·»åŠ è™šæ‹Ÿä¸»æœº</span></span><br><span class="line">rabbitmqctl add_vhost vhost</span><br><span class="line">  </span><br><span class="line"><span class="comment"># åˆ é™¤è™šæ‹Ÿä¸»æœº</span></span><br><span class="line">rabbitmqctl delete_vhost vhost</span><br><span class="line">  </span><br><span class="line"><span class="comment"># è®¾ç½®æƒé™ç”¨æˆ·</span></span><br><span class="line">rabbitmqctl set_permissions -p vhost username <span class="string">".*"</span> <span class="string">".*"</span> <span class="string">".*"</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#æ¸…ç©ºç”¨æˆ·æƒé™</span></span><br><span class="line">rabbitmqctl clear_permissions -p vhost username</span><br><span class="line">  </span><br><span class="line"><span class="comment"># è™šæ‹Ÿä¸»æœºä¸‹çš„ç”¨æˆ·</span></span><br><span class="line">rabbitmqctl list_permissions -p vhost</span><br><span class="line">  </span><br><span class="line"><span class="comment"># ç”¨æˆ·ä¸‹çš„è™šæ‹Ÿä¸»æœº</span></span><br><span class="line">rabbitmqctl list_user_permissions username</span><br></pre></td></tr></table></figure><hr><div id="link4"></div><h2 id="RabbitMQæ€ä¹ˆä½¿ç”¨"><a href="#RabbitMQæ€ä¹ˆä½¿ç”¨" class="headerlink" title="RabbitMQæ€ä¹ˆä½¿ç”¨"></a>RabbitMQæ€ä¹ˆä½¿ç”¨</h2><h3 id="è¿æ¥æœåŠ¡å™¨"><a href="#è¿æ¥æœåŠ¡å™¨" class="headerlink" title="è¿æ¥æœåŠ¡å™¨"></a>è¿æ¥æœåŠ¡å™¨</h3><p>æˆ‘ä½¿ç”¨çš„æ˜¯Java å®¢æˆ·ç«¯ å…¶ä»–è¯­è¨€è‡ªå·±æŸ¥é˜…å®˜æ–¹æ–‡æ¡£</p><p>æ ¹æ®<a href="https://www.rabbitmq.com/java-client.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><p>æˆ‘ä»¬è¦å¼•å…¥å®¢æˆ·ç«¯</p><p>å¦‚æœä½¿ç”¨Maven</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.rabbitmq&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;amqp-client&lt;&#x2F;artifactId&gt;</span><br><span class="line">  &lt;version&gt;5.7.0&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨Gradle</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  compile &#39;com.rabbitmq:amqp-client:5.7.0&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥åˆ°<a href="https://www.rabbitmq.com/api-guide.html" target="_blank" rel="noopener">apiæ–‡æ¡£</a>ï¼Œçœ‹çœ‹Javaæ€ä¹ˆä½¿ç”¨RabbitMQ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ConnectionFactory factory = <span class="keyword">new</span> ConnectionFactory();</span><br><span class="line"><span class="comment">// "guest"/"guest" by default, limited to localhost connections</span></span><br><span class="line">factory.setUsername(userName);</span><br><span class="line">factory.setPassword(password);</span><br><span class="line">factory.setVirtualHost(virtualHost);</span><br><span class="line">factory.setHost(hostName);</span><br><span class="line">factory.setPort(portNumber);</span><br><span class="line">  </span><br><span class="line">Connection conn = factory.newConnection();</span><br></pre></td></tr></table></figure><table><thead><tr><th>Property</th><th>Default Value</th></tr></thead><tbody><tr><td>Username</td><td>â€œguestâ€</td></tr><tr><td>Password</td><td>â€œguestâ€</td></tr><tr><td>Virtual host</td><td>â€œ/â€œ</td></tr><tr><td>Hostname</td><td>â€œlocalhostâ€</td></tr><tr><td>port</td><td>5672 for regular connections, 5671 for connections that use TLS</td></tr></tbody></table><p>è¿˜å¯ä»¥ä½¿ç”¨URLsæ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ConnectionFactory factory = <span class="keyword">new</span> ConnectionFactory();</span><br><span class="line">factory.setUri(<span class="string">"amqp://userName:password@hostName:portNumber/virtualHost"</span>);</span><br><span class="line">Connection conn = factory.newConnection();</span><br></pre></td></tr></table></figure><p>æˆ‘ä½¿ç”¨URLsæ–¹å¼ï¼Œå¦‚æœä½ è¦è¿æ¥åˆ°é»˜è®¤çš„è™šæ‹Ÿä¸»æœº/ï¼Œéœ€è¦å°†/è½¬ä¹‰ä¹Ÿå°±æ˜¯%2Fï¼Œå…¶ä»–ä¸ç”¨</p><p>è¿™é‡Œæˆ‘ç›´æ¥å†™æµ‹è¯•ç±»é‡Œé¢äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Aphage</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String uri = <span class="string">"amqp://%s:%s@%s:%d/%s"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String HOST = <span class="string">"192.168.92.128"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PORT = AMQP.PROTOCOL.PORT;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String USERNAME= <span class="string">"Aqua"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PASSWORD = <span class="string">"Aqua"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String VHOST = <span class="string">"%2F"</span>;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Connection conn = <span class="keyword">null</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        ConnectionFactory factory=<span class="keyword">new</span> ConnectionFactory();</span><br><span class="line">        factory.setUri(String.format(uri,USERNAME,PASSWORD,HOST,PORT,VHOST));</span><br><span class="line">        <span class="keyword">return</span> factory.newConnection();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        conn = getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">end</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span>!=conn)conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å£°æ˜äº¤æ¢æœºå’Œé˜Ÿåˆ—å¹¶ç»‘å®š"><a href="#å£°æ˜äº¤æ¢æœºå’Œé˜Ÿåˆ—å¹¶ç»‘å®š" class="headerlink" title="å£°æ˜äº¤æ¢æœºå’Œé˜Ÿåˆ—å¹¶ç»‘å®š"></a>å£°æ˜äº¤æ¢æœºå’Œé˜Ÿåˆ—å¹¶ç»‘å®š</h3><p>å£°æ˜äº¤æ¢æœºå’Œé˜Ÿåˆ—çš„æ—¶å€™åˆ†ä¸ºä¸¤ç§æƒ…å†µ</p><ol><li>å£°æ˜çš„äº¤æ¢æœºå’Œé˜Ÿåˆ—ä¸å­˜åœ¨ï¼Œå°±ä¼šåˆ›å»º</li><li>å¦‚æœå­˜åœ¨ï¼Œå°±ä¸ä¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">channel.exchangeDeclare(exchangeName, <span class="string">"direct"</span>, <span class="keyword">true</span>);</span><br><span class="line">String queueName = channel.queueDeclare().getQueue();</span><br><span class="line">channel.queueBind(queueName, exchangeName, routingKey);</span><br></pre></td></tr></table></figure><ol><li>ä¸€ç§æŒä¹…çš„ï¼Œéè‡ªåŠ¨äº¤æ¢çš„â€œç›´æ¥â€ç±»å‹</li><li>å…·æœ‰ç”Ÿæˆåç§°çš„éæŒä¹…ï¼Œç‹¬å ï¼Œè‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">channel.exchangeDeclare(exchangeName, <span class="string">"direct"</span>, <span class="keyword">true</span>);</span><br><span class="line">channel.queueDeclare(queueName, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">null</span>);</span><br><span class="line">channel.queueBind(queueName, exchangeName, routingKey);</span><br></pre></td></tr></table></figure><ol><li>ä¸€ç§æŒä¹…çš„ï¼Œéè‡ªåŠ¨äº¤æ¢çš„â€œç›´æ¥â€ç±»å‹</li><li>å…·æœ‰å·²çŸ¥åç§°çš„æŒä¹…ï¼Œéç‹¬å ï¼Œéè‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</li></ol><h3 id="å£°æ˜äº¤æ¢æœº"><a href="#å£°æ˜äº¤æ¢æœº" class="headerlink" title="å£°æ˜äº¤æ¢æœº"></a>å£°æ˜äº¤æ¢æœº</h3><p>æ ¹æ®ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å…ˆæ¥å£°æ˜ä¸€äº›äº¤æ¢æœº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test1</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Channel channel=conn.createChannel();</span><br><span class="line">    <span class="comment">//åˆ›å»ºäº¤æ¢æœº</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 1. äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment">    * 2. äº¤æ¢æœºç±»å‹</span></span><br><span class="line"><span class="comment">    * 3. æ˜¯å¦æ°¸ä¹…å­˜åœ¨ï¼Œfalse ä¸ºä¸´æ—¶é‡å¯æ¶ˆå¤±</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">//ç›´æ¥ç±»å‹</span></span><br><span class="line">    channel.exchangeDeclare(<span class="string">"direct-forever"</span>, BuiltinExchangeType.DIRECT,<span class="keyword">true</span>);</span><br><span class="line">    channel.exchangeDeclare(<span class="string">"direct-temporary"</span>, BuiltinExchangeType.DIRECT,<span class="keyword">false</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//å¹¿æ’­ç±»å‹ routing key å¿½ç•¥æ— æ•ˆ</span></span><br><span class="line">    channel.exchangeDeclare(<span class="string">"fanout-forever"</span>, BuiltinExchangeType.FANOUT,<span class="keyword">true</span>);</span><br><span class="line">    channel.exchangeDeclare(<span class="string">"fanout-temporary"</span>, BuiltinExchangeType.FANOUT,<span class="keyword">false</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//å¹¿æ’­ç±»å‹ routing key æ¨¡ç³ŠåŒ¹é…</span></span><br><span class="line">    channel.exchangeDeclare(<span class="string">"topic-forever"</span>, BuiltinExchangeType.TOPIC,<span class="keyword">true</span>);</span><br><span class="line">    channel.exchangeDeclare(<span class="string">"topic-temporary"</span>, BuiltinExchangeType.TOPIC,<span class="keyword">false</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//ä½¿ç”¨é”®å€¼å¯¹åŒ¹é…</span></span><br><span class="line">    channel.exchangeDeclare(<span class="string">"headers-forever"</span>, BuiltinExchangeType.HEADERS,<span class="keyword">true</span>);</span><br><span class="line">    channel.exchangeDeclare(<span class="string">"headers-temporary"</span>, BuiltinExchangeType.HEADERS,<span class="keyword">false</span>);</span><br><span class="line">  </span><br><span class="line">    channel.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>äº¤æ¢æœºç±»å‹åˆ†ä¸ºå››ç§ directã€fanoutã€topicã€headerï¼ˆè¿™ä¸ªæ€§èƒ½æœ€å·®ï¼‰</li><li>channel å®˜æ–¹å»ºè®®ä¸è¦å¤šçº¿ç¨‹å…±äº«ï¼Œæœ€å¥½ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ä¸€ä¸ªchannel</li></ul></blockquote><p>ç„¶åç™»é™†Web ç®¡ç†ç•Œé¢æŸ¥çœ‹</p><p><a href="http://192.168.92.128:15672/#/exchanges" target="_blank" rel="noopener">http://192.168.92.128:15672/#/exchanges</a></p><p>å‘ç°å·²ç»æœ‰æˆ‘ä»¬å£°æ˜çš„äº¤æ¢æœºäº†</p><p>å…¶ä¸­è¿˜æœ‰ä¸€äº›é»˜è®¤çš„äº¤æ¢æœº</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°äº¤æ¢æœºæ˜¯åœ¨è™šæ‹Ÿä¸»æœºä¸­çš„ã€æ¯ä¸ªè™šæ‹Ÿä¸»æœºäº’ç›¸éš”ç¦»</p><p>æˆ‘ä»¬ä¹Ÿå‘ç°åœ¨Featuresåˆ—ï¼Œæ°¸ä¹…çš„äº¤æ¢æœºæ˜¯å¸¦æœ‰Dæ ‡ç­¾çš„</p><hr><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å£°æ˜é˜Ÿåˆ—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Channel channel=conn.createChannel();</span><br><span class="line">    <span class="comment">//åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * queue - é˜Ÿåˆ—çš„åç§°</span></span><br><span class="line"><span class="comment">    * durable - å¦‚æœæˆ‘ä»¬å£°æ˜ä¸€ä¸ªæŒä¹…é˜Ÿåˆ—ï¼Œåˆ™ä¸ºtrueï¼ˆé˜Ÿåˆ—å°†åœ¨æœåŠ¡å™¨é‡å¯åç»§ç»­å­˜åœ¨ï¼‰</span></span><br><span class="line"><span class="comment">    * exclusive - å¦‚æœæˆ‘ä»¬å£°æ˜ä¸€ä¸ªç‹¬å é˜Ÿåˆ—ï¼ˆä»…é™äºæ­¤è¿æ¥ï¼‰ï¼Œåˆ™ä¸ºtrue</span></span><br><span class="line"><span class="comment">    * autoDelete - å¦‚æœæˆ‘ä»¬å£°æ˜ä¸€ä¸ªè‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—ï¼Œåˆ™ä¸ºtrueï¼ˆæœåŠ¡å™¨å°†åœ¨ä¸å†ä½¿ç”¨æ—¶å°†å…¶åˆ é™¤ï¼‰,æ¶ˆè´¹è€…æ–­å¼€è¿æ¥æ—¶æ˜¯å¦åˆ é™¤é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">    * arguments - é˜Ÿåˆ—çš„å…¶ä»–å±æ€§ï¼ˆæ„é€ å‚æ•°ï¼‰</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    channel.queueDeclare(<span class="string">"Aqua-forever"</span>,<span class="keyword">true</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line">    channel.queueDeclare(<span class="string">"fanout1-forever"</span>,<span class="keyword">true</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line">    channel.queueDeclare(<span class="string">"fanout2-forever"</span>,<span class="keyword">true</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line">    channel.queueDeclare(<span class="string">"topic1-forever"</span>,<span class="keyword">true</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line">    channel.queueDeclare(<span class="string">"topic2-forever"</span>,<span class="keyword">true</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line">    channel.queueDeclare(<span class="string">"topic3-forever"</span>,<span class="keyword">true</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line">    channel.queueDeclare(<span class="string">"headers1-forever"</span>,<span class="keyword">true</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line">    channel.queueDeclare(<span class="string">"headers2-forever"</span>,<span class="keyword">true</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//ä¸»åŠ¨å£°æ˜ä¸€ä¸ªæœåŠ¡å™¨å‘½åçš„ç‹¬å ï¼Œè‡ªåŠ¨åˆ é™¤ï¼ŒéæŒä¹…é˜Ÿåˆ—ã€‚</span></span><br><span class="line">    String queueName = channel.queueDeclare().getQueue();</span><br><span class="line">    System.out.println(queueName);</span><br><span class="line">  </span><br><span class="line">    queueName = channel.queueDeclare().getQueue();</span><br><span class="line">    System.out.println(queueName);</span><br><span class="line">  </span><br><span class="line">    queueName = channel.queueDeclare().getQueue();</span><br><span class="line">    System.out.println(queueName);</span><br><span class="line">  </span><br><span class="line">    System.in.read();</span><br><span class="line">  </span><br><span class="line">    channel.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨System.in.read è¿›è¡Œé˜»å¡</p><p>æ‰“å¼€ <a href="http://192.168.92.128:15672/#/queues" target="_blank" rel="noopener">http://192.168.92.128:15672/#/queues</a></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„é˜Ÿåˆ—å·²ç»å‡ºæ¥äº†ï¼Œä¹Ÿæœ‰ä¸€äº›ä¸´æ—¶é˜Ÿåˆ—</p><p>å£°æ˜é˜Ÿåˆ—ä¹Ÿå°±ä¸¤ä¸ªapi å‡½æ•°</p><p>å½“æˆ‘ä»¬ç‚¹å‡»ç»“æŸè¿›ç¨‹çš„æ—¶å€™ï¼Œæ–­å¼€è¿æ¥äº†ï¼Œä¸´æ—¶é˜Ÿåˆ—å°±ä¼šè‡ªåŠ¨åˆ é™¤</p><p>é˜Ÿåˆ—ä¹Ÿæœ‰äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å’Œäº¤æ¢æœºç»‘å®šäº†ï¼Œä¸ç„¶å‘é€çš„æ•°æ®æ²¡åŠæ³•è¿›å…¥é˜Ÿåˆ—</p><p>å› ä¸ºexchange æ˜¯è´Ÿè´£æ•°æ®è½¬å‘çš„ï¼Œè€Œé˜Ÿåˆ—ï¼ˆqueueï¼‰åªæ˜¯ä¿å­˜æ•°æ®çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Channel channel=conn.createChannel();</span><br><span class="line">    <span class="comment">//é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœºï¼Œä¸€ä¸ªé˜Ÿåˆ—å¯ç»‘å®šå¤šä¸ªäº¤æ¢æœº</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * queue - é˜Ÿåˆ—çš„åç§°</span></span><br><span class="line"><span class="comment">    * exchange - äº¤æ˜“æ‰€çš„åç§°</span></span><br><span class="line"><span class="comment">    * routingKey - ç”¨äºç»‘å®šçš„è·¯ç”±å¯†é’¥</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">//ç»‘å®šåˆ°ç›´æ¥äº¤æ¢æœº</span></span><br><span class="line">    channel.queueBind(<span class="string">"Aqua-forever"</span>,<span class="string">"direct-forever"</span>,<span class="string">"Aqua-1"</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//ç»‘å®šåˆ°å¹¿æ’­(fanoutç±»å‹ï¼Œå¯¹Routing Keyæ— æ•ˆ)</span></span><br><span class="line">    channel.queueBind(<span class="string">"fanout1-forever"</span>,<span class="string">"fanout-forever"</span>,<span class="string">"Aqua-1"</span>);</span><br><span class="line">    channel.queueBind(<span class="string">"fanout2-forever"</span>,<span class="string">"fanout-forever"</span>,<span class="string">"Aqua-2"</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//ç»‘å®šåˆ°å¹¿æ’­ routing key æ¨¡ç³ŠåŒ¹é…</span></span><br><span class="line">    channel.queueBind(<span class="string">"topic1-forever"</span>,<span class="string">"topic-forever"</span>,<span class="string">"Aqua.#"</span>);</span><br><span class="line">    channel.queueBind(<span class="string">"topic2-forever"</span>,<span class="string">"topic-forever"</span>,<span class="string">"Aqua.mea.*"</span>);</span><br><span class="line">    channel.queueBind(<span class="string">"topic3-forever"</span>,<span class="string">"topic-forever"</span>,<span class="string">"Aqua.suki.*"</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//ç»‘å®šåˆ°å¹¿æ’­(fanoutç±»å‹ï¼Œå¯¹Routing Keyæ— æ•ˆ)</span></span><br><span class="line">    channel.queueBind(<span class="string">"fanout1-forever"</span>,<span class="string">"fanout-forever"</span>,<span class="string">"Aqua-1"</span>);</span><br><span class="line">    channel.queueBind(<span class="string">"fanout2-forever"</span>,<span class="string">"fanout-forever"</span>,<span class="string">"Aqua-2"</span>);</span><br><span class="line">  </span><br><span class="line">    Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">"x-match"</span>, <span class="string">"any"</span>);<span class="comment">//è¿™ä»£è¡¨æ¶ˆæ¯æºå¸¦çš„Hashæ˜¯éœ€è¦å…¨éƒ¨åŒ¹é…é”®å€¼(all)ï¼Œè¿˜æ˜¯ä»…åŒ¹é…ä¸€ä¸ªé”®å€¼(any)å°±å¯ä»¥äº†</span></span><br><span class="line">    map.put(<span class="string">"xxx"</span>,<span class="string">"111"</span>);</span><br><span class="line">    map.put(<span class="string">"aaa"</span>,<span class="string">"bbb"</span>);</span><br><span class="line">    channel.queueBind(<span class="string">"headers1-forever"</span>,<span class="string">"headers-forever"</span>,<span class="string">""</span>,map);</span><br><span class="line">    map.put(<span class="string">"x-match"</span>, <span class="string">"all"</span>);</span><br><span class="line">    channel.queueBind(<span class="string">"headers2-forever"</span>,<span class="string">"headers-forever"</span>,<span class="string">""</span>,map);</span><br><span class="line">  </span><br><span class="line">    channel.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å‘é€æ¶ˆæ¯ï¼ˆç”Ÿäº§æ¶ˆæ¯ï¼‰åˆ°æœåŠ¡å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Channel channel = conn.createChannel();</span><br><span class="line">    <span class="comment">//å‘é€æ¶ˆæ¯(ç”Ÿäº§æ¶ˆæ¯)</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    channel.basicPublish(<span class="string">"direct-forever"</span>,<span class="string">"Aqua-1"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//routing key ç›´æ¥å¿½ç•¥</span></span><br><span class="line">    channel.basicPublish(<span class="string">"fanout-forever"</span>,<span class="string">"Aqua-1"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">    channel.basicPublish(<span class="string">"fanout-forever"</span>,<span class="string">"Aqua-2"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    topicè·¯ç”±å™¨çš„å…³é”®åœ¨äºå®šä¹‰è·¯ç”±é”®ï¼Œå®šä¹‰routingKeyåç§°ä¸èƒ½è¶…è¿‡255å­—èŠ‚ï¼Œä½¿ç”¨â€œ.â€ä½œä¸ºåˆ†éš”ç¬¦ï¼Œä¾‹å¦‚ï¼šcom.mq.rabbit.errorã€‚</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">    æ¶ˆè´¹æ¶ˆæ¯çš„æ—¶å€™routingKeyå¯ä»¥ä½¿ç”¨ä¸‹é¢å­—ç¬¦åŒ¹é…æ¶ˆæ¯ï¼š</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">    "*"åŒ¹é…ä¸€ä¸ªåˆ†æ®µ(ç”¨â€œ.â€åˆ†å‰²)çš„å†…å®¹ï¼›</span></span><br><span class="line"><span class="comment">    "#"åŒ¹é…0å’Œå¤šä¸ªå­—ç¬¦ï¼›</span></span><br><span class="line"><span class="comment">    ä¾‹å¦‚å‘å¸ƒäº†ä¸€ä¸ªâ€œcom.mq.rabbit.errorâ€çš„æ¶ˆæ¯ï¼š</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">    èƒ½åŒ¹é…ä¸Šçš„è·¯ç”±é”®ï¼š</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">    cn.mq.rabbit.*</span></span><br><span class="line"><span class="comment">    cn.mq.rabbit.#</span></span><br><span class="line"><span class="comment">    #.error</span></span><br><span class="line"><span class="comment">    cn.mq.#</span></span><br><span class="line"><span class="comment">    #</span></span><br><span class="line"><span class="comment">    ä¸èƒ½åŒ¹é…ä¸Šçš„è·¯ç”±é”®ï¼š</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">    cn.mq.*</span></span><br><span class="line"><span class="comment">    *.error</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    æ‰€ä»¥å¦‚æœæƒ³è¦è®¢é˜…æ‰€æœ‰æ¶ˆæ¯ï¼Œå¯ä»¥ä½¿ç”¨â€œ#â€åŒ¹é…ã€‚</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    channel.basicPublish(<span class="string">"topic-forever"</span>,<span class="string">"Aqua.hello"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">    channel.basicPublish(<span class="string">"topic-forever"</span>,<span class="string">"Aqua.mea.suki"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">    channel.basicPublish(<span class="string">"topic-forever"</span>,<span class="string">"Aqua.suki.me"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">"xxx"</span>,<span class="string">"111"</span>);</span><br><span class="line">    channel.basicPublish(<span class="string">"headers-forever"</span>,<span class="string">""</span>,<span class="keyword">new</span> AMQP.BasicProperties().builder().headers(map).build(),getMessage().getBytes());</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    void basicPublish(String exchange, String routingKey, BasicProperties props, byte[] body) throws IOException;</span></span><br><span class="line"><span class="comment">    void basicPublish(String exchange, String routingKey, boolean mandatory, BasicProperties props, byte[] body)</span></span><br><span class="line"><span class="comment">        throws IOException;</span></span><br><span class="line"><span class="comment">    void basicPublish(String exchange, String routingKey, boolean mandatory, boolean immediate, BasicProperties props, byte[] body)</span></span><br><span class="line"><span class="comment">        throws IOException;</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">    ä»–ä»¬å…±æœ‰çš„å‚æ•°åˆ†åˆ«æ˜¯ï¼š</span></span><br><span class="line"><span class="comment">    exchangeï¼šäº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment">    routingKeyï¼šè·¯ç”±é”®</span></span><br><span class="line"><span class="comment">    propsï¼šæ¶ˆæ¯å±æ€§å­—æ®µï¼Œæ¯”å¦‚æ¶ˆæ¯å¤´éƒ¨ä¿¡æ¯ç­‰ç­‰</span></span><br><span class="line"><span class="comment">    bodyï¼šæ¶ˆæ¯ä¸»ä½“éƒ¨åˆ†</span></span><br><span class="line"><span class="comment">    é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰mandatoryå’Œimmediateè¿™ä¸¤ä¸ªå‚æ•°ï¼Œé‰´äºRabbitMQ3.0ä¸å†æ”¯æŒimmediateæ ‡å¿—ï¼Œå› æ­¤æˆ‘ä»¬é‡ç‚¹è®¨è®ºmandatoryæ ‡å¿—</span></span><br><span class="line"><span class="comment">    mandatoryçš„ä½œç”¨ï¼š</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">    å½“mandatoryæ ‡å¿—ä½è®¾ç½®ä¸ºtrueæ—¶ï¼Œå¦‚æœexchangeæ ¹æ®è‡ªèº«ç±»å‹å’Œæ¶ˆæ¯routingKeyæ— æ³•æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„queueå­˜å‚¨æ¶ˆæ¯ï¼Œé‚£ä¹ˆbrokerä¼šè°ƒç”¨basic.returnæ–¹æ³•å°†æ¶ˆæ¯è¿”è¿˜ç»™ç”Ÿäº§è€…;</span></span><br><span class="line"><span class="comment">    å½“mandatoryè®¾ç½®ä¸ºfalseæ—¶ï¼Œå‡ºç°ä¸Šè¿°æƒ…å†µbrokerä¼šç›´æ¥å°†æ¶ˆæ¯ä¸¢å¼ƒ;é€šä¿—çš„è®²ï¼Œmandatoryæ ‡å¿—å‘Šè¯‰brokerä»£ç†æœåŠ¡å™¨è‡³å°‘å°†æ¶ˆæ¯routeåˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå¦åˆ™å°±å°†æ¶ˆæ¯returnç»™å‘é€è€…;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">//Return(int replyCode, String replyText, String exchange, String routingKey, AMQP.BasicProperties properties, byte[] body)</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">//è¿™é‡Œæˆ‘ä»¬å°è¯•å‘é€æ— æ³•è·¯ç”±çš„æ•°æ®</span></span><br><span class="line">    channel.basicPublish(<span class="string">"direct-forever"</span>,<span class="string">"Aqua-tietie"</span>,<span class="keyword">true</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    channel.addReturnListener((i, s, s1, s2, basicProperties, bytes) -&gt;</span><br><span class="line">            System.out.println(String.format(<span class="string">"replyCode=%d replyText=%s exchange=%s routingKey=%s body=%s"</span>,i,s,s1,s2,<span class="keyword">new</span> String(bytes,<span class="string">"UTF-8"</span>)))</span><br><span class="line">    );</span><br><span class="line">  </span><br><span class="line">    System.in.read();</span><br><span class="line">  </span><br><span class="line">    channel.close();</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>).format(<span class="keyword">new</span> Date()) + <span class="string">" : Hello Aqua!!!!!!!!!!!!! prpr!!!!!!!!!!!!!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåå¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºæ— æ³•è·¯ç”±çš„æ•°æ®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">replyCode&#x3D;312 replyText&#x3D;NO_ROUTE exchange&#x3D;direct-forever routingKey&#x3D;Aqua-tietie body&#x3D;2019-05-14 17:00:53 : Hello Aqua!!!!!!!!!!!!! prpr!!!!!!!!!!!!!</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ <a href="http://192.168.92.128:15672/#/queues" target="_blank" rel="noopener">http://192.168.92.128:15672/#/queues</a> å¯ä»¥çœ‹åˆ°æ•°æ®å·²ç»åˆ°è¾¾é˜Ÿåˆ—ä¸­äº†</p><hr><p>ä¸‹é¢æˆ‘ä»¬å¯ä»¥ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–æ•°æ®äº†ï¼Œå–æ•°æ®æ¯”è¾ƒç®€å•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        Channel channel = conn.createChannel();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * 1.é˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment">        * 2. auto ack è‡ªåŠ¨ç¡®è®¤</span></span><br><span class="line"><span class="comment">        * 3. consumerTag å–æ¶ˆå›è°ƒçš„æ—¶å€™ç”¨çš„</span></span><br><span class="line"><span class="comment">        * 4. æ¥å—æ¶ˆæ¯å›è°ƒ</span></span><br><span class="line"><span class="comment">        * 5. å›è°ƒè¢«å–æ¶ˆçš„å›è°ƒ ä¾‹å¦‚é˜Ÿåˆ—è¢«åˆ é™¤ï¼Œæˆ–è€…åœ¨é›†ç¾¤æ–¹æ¡ˆä¸­ï¼Œé˜Ÿåˆ—æ‰€åœ¨çš„èŠ‚ç‚¹å¤±è´¥</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        channel.basicConsume(<span class="string">"Aqua-forever"</span>,<span class="keyword">false</span>,<span class="string">"Aqua-listened-1"</span>,(s, delivery) -&gt; &#123;</span><br><span class="line">            System.out.println(String.format(<span class="string">"tag: %s exchange: %s routing key: %s"</span>,s,delivery.getEnvelope().getExchange(),delivery.getEnvelope().getRoutingKey()));</span><br><span class="line">            System.out.println(String.format(<span class="string">"msg: %s"</span>,<span class="keyword">new</span> String(delivery.getBody(),<span class="string">"UTF-8"</span>)));</span><br><span class="line">  </span><br><span class="line">            channel.basicAck(delivery.getEnvelope().getDeliveryTag(),<span class="keyword">false</span>);</span><br><span class="line">        &#125;,s -&gt; System.out.println(<span class="string">"ç›‘å¬è¢«å–æ¶ˆ: "</span>+ s));</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰è¿›è¡Œç¡®è®¤ï¼Œå½“ä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥ï¼Œæ•°æ®å°†ä¼šé‡æ–°æ”¾å›é˜Ÿåˆ—</span></span><br><span class="line">        <span class="comment">//è®©å…¶ä»–æ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹</span></span><br><span class="line">        channel.basicConsume(<span class="string">"fanout1-forever"</span>,<span class="keyword">false</span>,<span class="string">"Aqua-listened-2"</span>,(s, delivery) -&gt; &#123;</span><br><span class="line">            System.out.println(String.format(<span class="string">"tag: %s exchange: %s routing key: %s"</span>,s,delivery.getEnvelope().getExchange(),delivery.getEnvelope().getRoutingKey()));</span><br><span class="line">            System.out.println(String.format(<span class="string">"msg: %s"</span>,<span class="keyword">new</span> String(delivery.getBody(),<span class="string">"UTF-8"</span>)));</span><br><span class="line">  </span><br><span class="line">            <span class="comment">//channel.basicAck(delivery.getEnvelope().getDeliveryTag(),false);</span></span><br><span class="line">        &#125;,s -&gt; System.out.println(<span class="string">"ç›‘å¬è¢«å–æ¶ˆ: "</span>+ s));</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">//ä¹Ÿå¯æ˜¯ä½¿ç”¨DefaultConsumer å®˜æ–¹æ–‡æ¡£ç”¨çš„å°±æ˜¯è¿™ä¸ª</span></span><br><span class="line"><span class="comment">//        channel.basicConsume("Aqua-forever",false,"Aqua-listened",new DefaultConsumer(channel)&#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//                channel.basicAck(envelope.getDeliveryTag(),false);</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;);</span></span><br><span class="line">  </span><br><span class="line">        channel.addShutdownListener(e -&gt;</span><br><span class="line">            System.out.println(String.format(<span class="string">"è¿æ¥å…³é—­ %s %b"</span>,e.getMessage(),e.isHardError()))</span><br><span class="line">        );</span><br><span class="line">  </span><br><span class="line">        System.in.read();</span><br><span class="line">        channel.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœautoAckè®¾ç½®ä¸ºfalseï¼Œéœ€è¦è°ƒç”¨basicAck è¿›è¡Œç¡®è®¤ï¼Œæœªç¡®è®¤çš„å°†æ”¾åˆ°æœªç¡®è®¤é˜Ÿåˆ—ï¼Œå¦‚æœæ­¤æ—¶å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼Œå°†é‡æ–°æ”¾å›åŸé˜Ÿåˆ—</p><p>å¦‚æœautoAckè®¾ç½®ä¸ºtrueï¼Œåˆ™æœåŠ¡å™¨å‘é€æ¶ˆæ¯åï¼Œå°†æ¶ˆæ¯ä»å®¢æˆ·ç«¯ç§»é™¤</p><p><strong>éœ€è¦æŸ¥é˜…API <a href="#å¸®åŠ©">è¯·ç‚¹å‡»</a></strong></p><hr><div id="link5"></div><h2 id="RabbitMQæ¦‚å¿µ"><a href="#RabbitMQæ¦‚å¿µ" class="headerlink" title="RabbitMQæ¦‚å¿µ"></a>RabbitMQæ¦‚å¿µ</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p><strong>çœ‹å›¾</strong></p><p><img src="https://upload-images.jianshu.io/upload_images/5015984-367dd717d89ae5db.png" alt="æˆ‘æ˜¯å›¾ç‰‡"></p><ol><li>Message</li></ol><p>æ¶ˆæ¯ï¼Œæ¶ˆæ¯æ˜¯ä¸å…·åçš„ï¼Œå®ƒç”±æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ç»„æˆã€‚æ¶ˆæ¯ä½“æ˜¯ä¸é€æ˜çš„ï¼Œè€Œæ¶ˆæ¯å¤´åˆ™ç”±ä¸€ç³»åˆ—çš„å¯é€‰å±æ€§ç»„æˆï¼Œè¿™äº›å±æ€§åŒ…æ‹¬routing-keyï¼ˆè·¯ç”±é”®ï¼‰ã€priorityï¼ˆç›¸å¯¹äºå…¶ä»–æ¶ˆæ¯çš„ä¼˜å…ˆæƒï¼‰ã€delivery-modeï¼ˆæŒ‡å‡ºè¯¥æ¶ˆæ¯å¯èƒ½éœ€è¦æŒä¹…æ€§å­˜å‚¨ï¼‰ç­‰ã€‚</p><ol start="2"><li>Publisher</li></ol><p>æ¶ˆæ¯çš„ç”Ÿäº§è€…ï¼Œå°±æ˜¯å‘é€æ¶ˆæ¯çš„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå‘äº¤æ¢å™¨å‘å¸ƒæ¶ˆæ¯çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚</p><ol start="3"><li>Exchange</li></ol><p>äº¤æ¢å™¨ï¼Œå°±æ˜¯è½¬å‘æ¶ˆæ¯çš„ï¼Œç”¨æ¥æ¥æ”¶ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯å¹¶å°†è¿™äº›æ¶ˆæ¯è·¯ç”±ç»™æœåŠ¡å™¨ä¸­çš„é˜Ÿåˆ—ã€‚</p><ol start="4"><li>Binding</li></ol><p>ç»‘å®šï¼Œç”¨äºæ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢å™¨ä¹‹é—´çš„å…³è”ã€‚ä¸€ä¸ªç»‘å®šå°±æ˜¯åŸºäºè·¯ç”±é”®å°†äº¤æ¢å™¨å’Œæ¶ˆæ¯é˜Ÿåˆ—è¿æ¥èµ·æ¥çš„è·¯ç”±è§„åˆ™ï¼Œæ‰€ä»¥å¯ä»¥å°†äº¤æ¢å™¨ç†è§£æˆä¸€ä¸ªç”±ç»‘å®šæ„æˆçš„è·¯ç”±è¡¨ã€‚</p><p>é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœºï¼Œä¸€ä¸ªé˜Ÿåˆ—å¯ä»¥ç»‘å®šå¤šä¸ªäº¤æ¢æœºï¼Œä¸€ä¸ªäº¤æ¢æœºä¹Ÿå¯ä»¥å¯¹åº”å¤šä¸ªé˜Ÿåˆ—ï¼Œå¤šå¯¹å¤šå…³ç³»</p><ol start="5"><li>Queue</li></ol><p>æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨æ¥ä¿å­˜æ¶ˆæ¯ç›´åˆ°å‘é€ç»™æ¶ˆè´¹è€…ã€‚å®ƒæ˜¯æ¶ˆæ¯çš„å®¹å™¨ï¼Œä¹Ÿæ˜¯æ¶ˆæ¯çš„ç»ˆç‚¹ã€‚ä¸€ä¸ªæ¶ˆæ¯å¯æŠ•å…¥ä¸€ä¸ªæˆ–å¤šä¸ªé˜Ÿåˆ—ã€‚æ¶ˆæ¯ä¸€ç›´åœ¨é˜Ÿåˆ—é‡Œé¢ï¼Œç­‰å¾…æ¶ˆè´¹è€…è¿æ¥åˆ°è¿™ä¸ªé˜Ÿåˆ—å°†å…¶å–èµ°ã€‚</p><ol start="6"><li>Connection</li></ol><p>ç½‘ç»œè¿æ¥ï¼Œæ¯”å¦‚ä¸€ä¸ªTCPè¿æ¥ã€‚</p><ol start="7"><li>Channel</li></ol><p>ä¿¡é“ï¼Œå¤šè·¯å¤ç”¨è¿æ¥ä¸­çš„ä¸€æ¡ç‹¬ç«‹çš„åŒå‘æ•°æ®æµé€šé“ã€‚ä¿¡é“æ˜¯å»ºç«‹åœ¨çœŸå®çš„TCPè¿æ¥å†…åœ°è™šæ‹Ÿè¿æ¥ï¼ŒAMQP å‘½ä»¤éƒ½æ˜¯é€šè¿‡ä¿¡é“å‘å‡ºå»çš„ï¼Œä¸ç®¡æ˜¯å‘å¸ƒæ¶ˆæ¯ã€è®¢é˜…é˜Ÿåˆ—è¿˜æ˜¯æ¥æ”¶æ¶ˆæ¯ï¼Œè¿™äº›åŠ¨ä½œéƒ½æ˜¯é€šè¿‡ä¿¡é“å®Œæˆã€‚å› ä¸ºå¯¹äºæ“ä½œç³»ç»Ÿæ¥è¯´å»ºç«‹å’Œé”€æ¯ TCP éƒ½æ˜¯éå¸¸æ˜‚è´µçš„å¼€é”€ï¼Œæ‰€ä»¥å¼•å…¥äº†ä¿¡é“çš„æ¦‚å¿µï¼Œä»¥å¤ç”¨ä¸€æ¡ TCP è¿æ¥ã€‚</p><p>å…¶å®æ˜¯ä¸€ä¸ªChannelå¯¹åº”ä¸€æ¡TCPè¿æ¥ï¼Œè¿˜æœ‰å®˜æ–¹å»ºè®®ä¸è¦å¤šçº¿ç¨‹å…±äº«Channelï¼Œæœ€å¥½æ˜¯ä¸€ä¸ªçº¿ç¨‹å¯¹åº”ä¸€ä¸ªChannel</p><ol start="8"><li>Consumer</li></ol><p>æ¥æ”¶æ¶ˆæ¯çš„ï¼Œæ¶ˆæ¯çš„æ¶ˆè´¹è€…ï¼Œè¡¨ç¤ºä¸€ä¸ªä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å¾—æ¶ˆæ¯çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚</p><ol start="9"><li>Virtual Host</li></ol><p>è™šæ‹Ÿä¸»æœºï¼Œè¡¨ç¤ºä¸€æ‰¹äº¤æ¢å™¨ã€æ¶ˆæ¯é˜Ÿåˆ—å’Œç›¸å…³å¯¹è±¡ã€‚è™šæ‹Ÿä¸»æœºæ˜¯å…±äº«ç›¸åŒçš„èº«ä»½è®¤è¯å’ŒåŠ å¯†ç¯å¢ƒçš„ç‹¬ç«‹æœåŠ¡å™¨åŸŸã€‚æ¯ä¸ª vhost æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª mini ç‰ˆçš„<br>RabbitMQ æœåŠ¡å™¨ï¼Œæ‹¥æœ‰è‡ªå·±çš„é˜Ÿåˆ—ã€äº¤æ¢å™¨ã€ç»‘å®šå’Œæƒé™æœºåˆ¶ã€‚vhost æ˜¯ AMQP æ¦‚å¿µçš„åŸºç¡€ï¼Œå¿…é¡»åœ¨è¿æ¥æ—¶æŒ‡å®šï¼ŒRabbitMQ é»˜è®¤çš„ vhost æ˜¯ / ã€‚</p><ol start="10"><li>Broker</li></ol><p>è¡¨ç¤ºæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å®ä½“ã€‚</p><h3 id="AMQPä¸­çš„æ¶ˆæ¯è·¯ç”±"><a href="#AMQPä¸­çš„æ¶ˆæ¯è·¯ç”±" class="headerlink" title="AMQPä¸­çš„æ¶ˆæ¯è·¯ç”±"></a>AMQPä¸­çš„æ¶ˆæ¯è·¯ç”±</h3><p><img src="https://upload-images.jianshu.io/upload_images/5015984-7fd73af768f28704.png" alt="æˆ‘æ˜¯å›¾ç‰‡"></p><p>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°äº¤æ¢æœºï¼Œäº¤æ¢æœºæ ¹æ®äº¤æ¢æœºç±»å‹å’Œå‚æ•°ã€ç»‘å®šçš„é˜Ÿåˆ—ï¼Œè½¬å‘åˆ°å¯¹åº”çš„é˜Ÿåˆ—</p><p>æ¶ˆè´¹è€…å»é˜Ÿåˆ—å–å‡ºæ•°æ®</p><h3 id="Exchange-ç±»å‹"><a href="#Exchange-ç±»å‹" class="headerlink" title="Exchange ç±»å‹"></a>Exchange ç±»å‹</h3><p>Exchangeåˆ†å‘æ¶ˆæ¯æ—¶æ ¹æ®ç±»å‹çš„ä¸åŒåˆ†å‘ç­–ç•¥æœ‰åŒºåˆ«ï¼Œç›®å‰å…±å››ç§ç±»å‹ï¼šdirectã€fanoutã€topicã€headers ã€‚headers åŒ¹é… AMQP æ¶ˆæ¯çš„ header è€Œä¸æ˜¯è·¯<br>ç”±é”®ï¼Œæ­¤å¤– headers äº¤æ¢å™¨å’Œ direct äº¤æ¢å™¨å®Œå…¨ä¸€è‡´ï¼Œä½†æ€§èƒ½å·®å¾ˆå¤šï¼Œç›®å‰å‡ ä¹ç”¨ä¸åˆ°äº†ï¼Œæ‰€ä»¥ç›´æ¥çœ‹å¦å¤–ä¸‰ç§ç±»å‹</p><ol><li>direct</li></ol><p><img src="https://upload-images.jianshu.io/upload_images/5015984-13db639d2c22f2aa.png" alt="æˆ‘æ˜¯å›¾ç‰‡"></p><p>æ¶ˆæ¯ä¸­çš„è·¯ç”±é”®ï¼ˆrouting keyï¼‰å¦‚æœå’Œ Binding ä¸­çš„ binding key ä¸€è‡´ï¼Œ äº¤æ¢å™¨å°±å°†æ¶ˆæ¯å‘åˆ°å¯¹åº”çš„é˜Ÿåˆ—ä¸­ã€‚è·¯ç”±é”®ä¸é˜Ÿåˆ—åå®Œå…¨åŒ¹é…ï¼Œå¦‚æœä¸€ä¸ªé˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢æœºè¦æ±‚è·¯ç”±é”®ä¸ºâ€œdogâ€ï¼Œåˆ™åªè½¬å‘ routing key æ ‡è®°ä¸ºâ€œdogâ€çš„æ¶ˆæ¯ï¼Œä¸ä¼šè½¬å‘â€œdog.puppyâ€ï¼Œä¹Ÿä¸ä¼šè½¬å‘â€œdog.guardâ€ç­‰ç­‰ã€‚å®ƒæ˜¯å®Œå…¨åŒ¹é…ã€å•æ’­çš„æ¨¡å¼ã€‚</p><ol start="2"><li>fanout</li></ol><p><img src="https://upload-images.jianshu.io/upload_images/5015984-2f509b7f34c47170.png" alt="æˆ‘æ˜¯å›¾ç‰‡"></p><p>æ¯ä¸ªå‘åˆ° fanout ç±»å‹äº¤æ¢å™¨çš„æ¶ˆæ¯éƒ½ä¼šåˆ†åˆ°æ‰€æœ‰ç»‘å®šçš„é˜Ÿåˆ—ä¸Šå»ã€‚fanout äº¤æ¢å™¨ä¸å¤„ç†è·¯ç”±é”®ï¼Œåªæ˜¯ç®€å•çš„å°†é˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢å™¨ä¸Šï¼Œæ¯ä¸ªå‘é€åˆ°äº¤æ¢å™¨çš„æ¶ˆæ¯éƒ½ä¼šè¢«è½¬å‘åˆ°ä¸è¯¥äº¤æ¢å™¨ç»‘å®šçš„æ‰€æœ‰é˜Ÿåˆ—ä¸Šã€‚å¾ˆåƒå­ç½‘å¹¿æ’­ï¼Œæ¯å°å­ç½‘å†…çš„ä¸»æœºéƒ½è·å¾—äº†ä¸€ä»½å¤åˆ¶çš„æ¶ˆæ¯ã€‚fanout ç±»å‹è½¬å‘æ¶ˆæ¯æ˜¯æœ€å¿«çš„ã€‚</p><ol start="3"><li>topic</li></ol><p><img src="https://upload-images.jianshu.io/upload_images/5015984-275ea009bdf806a0.png" alt="æˆ‘æ˜¯å›¾ç‰‡"></p><p>topic äº¤æ¢å™¨é€šè¿‡æ¨¡å¼åŒ¹é…åˆ†é…æ¶ˆæ¯çš„è·¯ç”±é”®å±æ€§ï¼Œå°†è·¯ç”±é”®å’ŒæŸä¸ªæ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œæ­¤æ—¶é˜Ÿåˆ—éœ€è¦ç»‘å®šåˆ°ä¸€ä¸ªæ¨¡å¼ä¸Šã€‚å®ƒå°†è·¯ç”±é”®å’Œç»‘å®šé”®çš„å­—ç¬¦ä¸²åˆ‡åˆ†æˆå•è¯ï¼Œè¿™äº›å•è¯ä¹‹é—´ç”¨ç‚¹éš”å¼€ã€‚å®ƒåŒæ ·ä¹Ÿä¼šè¯†åˆ«ä¸¤ä¸ªé€šé…ç¬¦ï¼šç¬¦å·â€œ#â€å’Œç¬¦å·â€œâ€ã€‚#åŒ¹é…0ä¸ªæˆ–å¤šä¸ªå•è¯ï¼ŒåŒ¹é…ä¸å¤šä¸å°‘ä¸€ä¸ªå•è¯ã€‚</p><blockquote><ul><li>basicPublishâ€‹(String exchange, String routingKey, boolean mandatory, boolean immediate, AMQP.BasicProperties props, byte[] body)</li><li>basicPublishâ€‹(String exchange, String routingKey, boolean mandatory, AMQP.BasicProperties props, byte[] body)</li><li>basicPublishâ€‹(String exchange, String routingKey, AMQP.BasicProperties props, byte[] body)</li><li>å¯ä»¥æ ¹æ® mandatory è¿›è¡Œæ— æ³•è·¯ç”±çš„æ¶ˆæ¯è¿›è¡Œå¤„ç†</li><li>mandatory = false æ— æ³•è·¯ç”±çš„æ¶ˆæ¯ç›´æ¥ä¸¢å¼ƒ</li><li>mandatory = true æ— æ³•è·¯ç”±çš„æ¶ˆæ¯é€šè¿‡ Return å›è°ƒå‡½æ•° é€šçŸ¥</li><li>immediate RabbitMQ 3.0 ä¸å†æ”¯æŒæ­¤æ ‡è®°</li></ul></blockquote><hr><div id="link6"></div><h2 id="RabbitMQæ¶ˆæ¯äº‹åŠ¡"><a href="#RabbitMQæ¶ˆæ¯äº‹åŠ¡" class="headerlink" title="RabbitMQæ¶ˆæ¯äº‹åŠ¡"></a>RabbitMQæ¶ˆæ¯äº‹åŠ¡</h2><h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><p>æ¶ˆæ¯äº‹ç‰©ä¿è¯æ¶ˆæ¯ä¸€å®šåˆ°è¾¾RabbitMQæœåŠ¡å™¨</p><p>åªæœ‰ä¸‰ä¸ªApi</p><p>channel.txSelect() å£°æ˜å¯åŠ¨äº‹åŠ¡æ¨¡å¼ï¼›</p><p>channel.txComment() æäº¤äº‹åŠ¡ï¼›</p><p>channel.txRollback() å›æ»šäº‹åŠ¡ï¼›</p><p>è™½ç„¶å½“ä½ è°ƒç”¨publish å‘é€åˆ°æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¹¶ä¸ä¼šæŠŠä»–ç«‹åˆ»æ”¾åˆ°é˜Ÿåˆ—ï¼Œåªæœ‰äº‹åŠ¡æäº¤æ‰ä¼šè¿›å…¥é˜Ÿåˆ—</p><p>äº‹åŠ¡æ€§èƒ½å¾ˆä½ï¼Œäº‹åŠ¡api æ¯”è¾ƒç®€å•æ²¡æœ‰ä»€ä¹ˆå¥½æè¿°çš„äº†</p><h3 id="æ‰©å±•çŸ¥è¯†"><a href="#æ‰©å±•çŸ¥è¯†" class="headerlink" title="æ‰©å±•çŸ¥è¯†"></a>æ‰©å±•çŸ¥è¯†</h3><p>æ‰©å±•çŸ¥è¯†<br>æˆ‘ä»¬çŸ¥é“ï¼Œæ¶ˆè´¹è€…å¯ä»¥ä½¿ç”¨æ¶ˆæ¯è‡ªåŠ¨æˆ–æ‰‹åŠ¨å‘é€æ¥ç¡®è®¤æ¶ˆè´¹æ¶ˆæ¯ï¼Œé‚£å¦‚æœæˆ‘ä»¬åœ¨æ¶ˆè´¹è€…æ¨¡å¼ä¸­ä½¿ç”¨äº‹åŠ¡ï¼ˆå½“ç„¶å¦‚æœä½¿ç”¨äº†æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯ï¼Œå®Œå…¨ç”¨ä¸åˆ°äº‹åŠ¡çš„ï¼‰ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æ¶ˆè´¹è€…æ¨¡å¼ä½¿ç”¨äº‹åŠ¡</p><p>å‡è®¾æ¶ˆè´¹è€…æ¨¡å¼ä¸­ä½¿ç”¨äº†äº‹åŠ¡ï¼Œå¹¶ä¸”åœ¨æ¶ˆæ¯ç¡®è®¤ä¹‹åè¿›è¡Œäº†äº‹åŠ¡å›æ»šï¼Œé‚£ä¹ˆRabbitMQä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„å˜åŒ–ï¼Ÿ</p><p>ç»“æœåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p><ol><li><p>autoAck=falseæ‰‹åŠ¨åº”å¯¹çš„æ—¶å€™æ˜¯æ”¯æŒäº‹åŠ¡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å³ä½¿ä½ å·²ç»æ‰‹åŠ¨ç¡®è®¤äº†æ¶ˆæ¯å·²ç»æ”¶åˆ°äº†ï¼Œä½†åœ¨ç¡®è®¤æ¶ˆæ¯ä¼šç­‰äº‹åŠ¡çš„è¿”å›è§£å†³ä¹‹åï¼Œåœ¨åšå†³å®šæ˜¯ç¡®è®¤æ¶ˆæ¯è¿˜æ˜¯é‡æ–°æ”¾å›é˜Ÿåˆ—ï¼Œå¦‚æœä½ æ‰‹åŠ¨ç¡®è®¤ç°åœ¨ä¹‹åï¼Œåˆå›æ»šäº†äº‹åŠ¡ï¼Œé‚£ä¹ˆå·²äº‹åŠ¡å›æ»šä¸ºä¸»ï¼Œæ­¤æ¡æ¶ˆæ¯ä¼šé‡æ–°æ”¾å›é˜Ÿåˆ—ï¼›</p></li><li><p>autoAck=trueå¦‚æœè‡ªå®šç¡®è®¤ä¸ºtrueçš„æƒ…å†µæ˜¯ä¸æ”¯æŒäº‹åŠ¡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å³ä½¿åœ¨æ”¶åˆ°æ¶ˆæ¯ä¹‹ååœ¨å›æ»šäº‹åŠ¡ä¹Ÿæ˜¯äºäº‹æ— è¡¥çš„ï¼Œé˜Ÿåˆ—å·²ç»æŠŠæ¶ˆæ¯ç§»é™¤äº†ï¼›</p></li></ol><hr><div id="link7"></div><h2 id="RabbitMQæ¶ˆæ¯ç¡®è®¤"><a href="#RabbitMQæ¶ˆæ¯ç¡®è®¤" class="headerlink" title="RabbitMQæ¶ˆæ¯ç¡®è®¤"></a>RabbitMQæ¶ˆæ¯ç¡®è®¤</h2><p>Confirmå‘é€æ–¹ç¡®è®¤æ¨¡å¼ä½¿ç”¨å’Œäº‹åŠ¡ç±»ä¼¼ï¼Œä¹Ÿæ˜¯é€šè¿‡è®¾ç½®Channelè¿›è¡Œå‘é€æ–¹ç¡®è®¤çš„ã€‚</p><p>æ•ˆç‡æ¯”äº‹åŠ¡è¦å¿«</p><p>Confirmçš„ä¸‰ç§å®ç°æ–¹å¼ï¼š</p><ol><li><p>channel.waitForConfirms()æ™®é€šå‘é€æ–¹ç¡®è®¤æ¨¡å¼ï¼›</p></li><li><p>channel.waitForConfirmsOrDie()æ‰¹é‡ç¡®è®¤æ¨¡å¼ï¼›</p></li><li><p>channel.addConfirmListener()å¼‚æ­¥ç›‘å¬å‘é€æ–¹ç¡®è®¤æ¨¡å¼ï¼›</p></li></ol><p>ä½¿ç”¨ channel.confirmSelect() å¼€å¯æ¶ˆæ¯ç¡®è®¤å›è°ƒ</p><h3 id="æ™®é€šConfirmæ¨¡å¼"><a href="#æ™®é€šConfirmæ¨¡å¼" class="headerlink" title="æ™®é€šConfirmæ¨¡å¼"></a>æ™®é€šConfirmæ¨¡å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test77</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Channel channel = conn.createChannel();</span><br><span class="line">  </span><br><span class="line">    channel.confirmSelect();</span><br><span class="line">    channel.basicPublish(<span class="string">"direct-forever"</span>,<span class="string">"Aqua-1"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">    <span class="keyword">if</span>(channel.waitForConfirms())</span><br><span class="line">        System.out.println(<span class="string">"å‘é€æˆåŠŸ"</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        System.out.println(<span class="string">"å‘é€å¤±è´¥"</span>);</span><br><span class="line">  </span><br><span class="line">    channel.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰¹é‡Confirmæ¨¡å¼"><a href="#æ‰¹é‡Confirmæ¨¡å¼" class="headerlink" title="æ‰¹é‡Confirmæ¨¡å¼"></a>æ‰¹é‡Confirmæ¨¡å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test777</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Channel channel = conn.createChannel();</span><br><span class="line">  </span><br><span class="line">    channel.confirmSelect();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;++i)</span><br><span class="line">        channel.basicPublish(<span class="string">"direct-forever"</span>,<span class="string">"Aqua-1"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">    channel.waitForConfirmsOrDie();</span><br><span class="line">    System.out.println(<span class="string">"å‘é€æˆåŠŸ"</span>);</span><br><span class="line">  </span><br><span class="line">    channel.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¼‚æ­¥Confirmæ¨¡å¼"><a href="#å¼‚æ­¥Confirmæ¨¡å¼" class="headerlink" title="å¼‚æ­¥Confirmæ¨¡å¼"></a>å¼‚æ­¥Confirmæ¨¡å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test7</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Channel channel = conn.createChannel();</span><br><span class="line">  </span><br><span class="line">    channel.confirmSelect();</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¯ä»¥çœ‹å‡ºï¼Œä»£ç æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œæ¶ˆæ¯ç¡®è®¤æœ‰å¯èƒ½æ˜¯æ‰¹é‡ç¡®è®¤çš„ï¼Œæ˜¯å¦æ‰¹é‡ç¡®è®¤åœ¨äºè¿”å›çš„multipleçš„å‚æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">        æ­¤å‚æ•°ä¸ºboolå€¼ï¼Œå¦‚æœtrueè¡¨ç¤ºæ‰¹é‡æ‰§è¡Œäº†deliveryTagè¿™ä¸ªå€¼ä»¥å‰çš„æ‰€æœ‰æ¶ˆæ¯ï¼Œå¦‚æœä¸ºfalseçš„è¯è¡¨ç¤ºå•æ¡ç¡®è®¤ã€‚</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    channel.addConfirmListener((l, b) -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">"å·²ç»ç¡®è®¤ "</span>+ l + <span class="string">" "</span> + b);</span><br><span class="line">    &#125;,(l, b) -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">"æœªç¡®è®¤ "</span> + l + <span class="string">" "</span> + b);</span><br><span class="line">    &#125;);</span><br><span class="line">  </span><br><span class="line">    channel.basicPublish(<span class="string">"direct-forever"</span>,<span class="string">"Aqua-1"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">    channel.basicPublish(<span class="string">"direct-forever"</span>,<span class="string">"Aqua-1"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">    channel.basicPublish(<span class="string">"direct-forever"</span>,<span class="string">"Aqua-1"</span>,<span class="keyword">null</span>,getMessage().getBytes());</span><br><span class="line">  </span><br><span class="line">    System.in.read();</span><br><span class="line">    channel.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>æ€§èƒ½æ¯”è¾ƒ æ™®é€šæ¨¡å¼ &lt; æ‰¹é‡æ¨¡å¼ &lt; å¼‚æ­¥æ¨¡å¼</li></ul></blockquote><hr><div id="link8"></div><h2 id="RabbitMQé…ç½®"><a href="#RabbitMQé…ç½®" class="headerlink" title="RabbitMQé…ç½®"></a>RabbitMQé…ç½®</h2><p>æ–‡ä»¶éœ€è¦è‡ªå·±åˆ›å»º</p><p>rabbitmq.confå’Œrabbitmq-env.confçš„ä½ç½®<br>è¿™äº›æ–‡ä»¶çš„ä½ç½®æ˜¯ç‰¹å®šäºåˆ†å‘çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¸æ˜¯åˆ›å»ºçš„ï¼Œä½†å¸Œæœ›ä½äºæ¯ä¸ªå¹³å°çš„ä»¥ä¸‹ä½ç½®ï¼š</p><p>é€šç”¨UNIXï¼š<code>$RABBITMQ_HOME/etc/rabbitmq/</code><br>Debianï¼š<code>/etc/rabbitmq/</code><br>RPMï¼š<code>/etc/rabbitmq/</code><br>Mac OSï¼ˆHomebrewï¼‰ï¼š<code>${install_prefix}/etc/rabbitmq/</code>ï¼ŒHomebrewåœ°çª–å‰ç¼€é€šå¸¸æ˜¯<code>/usr/local</code><br>Windowsï¼š<code>ï¼…APPDATAï¼…\RabbitMQ\</code><br>å¦‚æœrabbitmq-env.confä¸å­˜åœ¨ï¼Œåˆ™å¯ä»¥åœ¨ç”±RABBITMQ_CONF_ENV_FILEå˜é‡æŒ‡å®šçš„ä½ç½®æ‰‹åŠ¨åˆ›å»ºã€‚åœ¨Windowsç³»ç»Ÿä¸Šï¼Œå®ƒåä¸ºrabbitmq-env.batã€‚</p><p>å¦‚æœrabbitmq.confä¸å­˜åœ¨ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºã€‚å¦‚æœæ›´æ”¹ä½ç½®ï¼Œè¯·è®¾ç½®RABBITMQ_CONFIG_FILEç¯å¢ƒå˜é‡ã€‚RabbitMQè‡ªåŠ¨å°†.confæ‰©å±•åé™„åŠ åˆ°æ­¤å˜é‡çš„å€¼ã€‚</p><p>æ›´æ”¹åé‡æ–°å¯åŠ¨æœåŠ¡å™¨ã€‚æ·»åŠ æˆ–åˆ é™¤é…ç½®æ–‡ä»¶åï¼ŒWindowsæœåŠ¡ç”¨æˆ·éœ€è¦é‡æ–°å®‰è£…è¯¥æœåŠ¡</p><p><a href="https://www.rabbitmq.com/configure.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><hr><div id="link9"></div><h2 id="RabbitMQé›†ç¾¤"><a href="#RabbitMQé›†ç¾¤" class="headerlink" title="RabbitMQé›†ç¾¤"></a>RabbitMQé›†ç¾¤</h2><h3 id="Rabbitmqé›†ç¾¤é«˜å¯ç”¨"><a href="#Rabbitmqé›†ç¾¤é«˜å¯ç”¨" class="headerlink" title="Rabbitmqé›†ç¾¤é«˜å¯ç”¨"></a>Rabbitmqé›†ç¾¤é«˜å¯ç”¨</h3><p>RabbitMQæ˜¯ç”¨erlangå¼€å‘çš„ï¼Œé›†ç¾¤éå¸¸æ–¹ä¾¿ï¼Œå› ä¸ºerlangå¤©ç”Ÿå°±æ˜¯ä¸€é—¨åˆ†å¸ƒå¼è¯­è¨€,ä½†å…¶æœ¬èº«å¹¶ä¸æ”¯æŒè´Ÿè½½å‡è¡¡ã€‚</p><p>Rabbitæ¨¡å¼å¤§æ¦‚åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼šå•ä¸€æ¨¡å¼ã€æ™®é€šæ¨¡å¼ã€é•œåƒæ¨¡å¼<br>é›†ç¾¤æœ€å°‘éœ€è¦ä¸€ä¸ªç£ç›˜èŠ‚ç‚¹</p><h4 id="å•ä¸€æ¨¡å¼ï¼šæœ€ç®€å•çš„æƒ…å†µï¼Œéé›†ç¾¤æ¨¡å¼ã€‚"><a href="#å•ä¸€æ¨¡å¼ï¼šæœ€ç®€å•çš„æƒ…å†µï¼Œéé›†ç¾¤æ¨¡å¼ã€‚" class="headerlink" title="å•ä¸€æ¨¡å¼ï¼šæœ€ç®€å•çš„æƒ…å†µï¼Œéé›†ç¾¤æ¨¡å¼ã€‚"></a>å•ä¸€æ¨¡å¼ï¼šæœ€ç®€å•çš„æƒ…å†µï¼Œéé›†ç¾¤æ¨¡å¼ã€‚</h4><p>æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚</p><h4 id="æ™®é€šæ¨¡å¼ï¼šé»˜è®¤çš„é›†ç¾¤æ¨¡å¼ã€‚"><a href="#æ™®é€šæ¨¡å¼ï¼šé»˜è®¤çš„é›†ç¾¤æ¨¡å¼ã€‚" class="headerlink" title="æ™®é€šæ¨¡å¼ï¼šé»˜è®¤çš„é›†ç¾¤æ¨¡å¼ã€‚"></a>æ™®é€šæ¨¡å¼ï¼šé»˜è®¤çš„é›†ç¾¤æ¨¡å¼ã€‚</h4><p>å¯¹äºQueueæ¥è¯´ï¼Œæ¶ˆæ¯å®ä½“åªå­˜åœ¨äºå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒAã€Bä¸¤ä¸ªèŠ‚ç‚¹ä»…æœ‰ç›¸åŒçš„å…ƒæ•°æ®ï¼Œå³é˜Ÿåˆ—ç»“æ„ã€‚</p><p>å½“æ¶ˆæ¯è¿›å…¥AèŠ‚ç‚¹çš„Queueä¸­åï¼Œconsumerä»BèŠ‚ç‚¹æ‹‰å–æ—¶ï¼ŒRabbitMQä¼šä¸´æ—¶åœ¨Aã€Bé—´è¿›è¡Œæ¶ˆæ¯ä¼ è¾“ï¼ŒæŠŠAä¸­çš„æ¶ˆæ¯å®ä½“å–å‡ºå¹¶ç»è¿‡Bå‘é€ç»™consumerã€‚</p><p>æ‰€ä»¥consumeråº”å°½é‡è¿æ¥æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»ä¸­å–æ¶ˆæ¯ã€‚å³å¯¹äºåŒä¸€ä¸ªé€»è¾‘é˜Ÿåˆ—ï¼Œè¦åœ¨å¤šä¸ªèŠ‚ç‚¹å»ºç«‹ç‰©ç†Queueã€‚å¦åˆ™æ— è®ºconsumerè¿Aæˆ–Bï¼Œå‡ºå£æ€»åœ¨Aï¼Œä¼šäº§ç”Ÿç“¶é¢ˆã€‚</p><p>è¯¥æ¨¡å¼å­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯å½“AèŠ‚ç‚¹æ•…éšœåï¼ŒBèŠ‚ç‚¹æ— æ³•å–åˆ°AèŠ‚ç‚¹ä¸­è¿˜æœªæ¶ˆè´¹çš„æ¶ˆæ¯å®ä½“ã€‚</p><p>å¦‚æœåšäº†æ¶ˆæ¯æŒä¹…åŒ–ï¼Œé‚£ä¹ˆå¾—ç­‰AèŠ‚ç‚¹æ¢å¤ï¼Œç„¶åæ‰å¯è¢«æ¶ˆè´¹ï¼›å¦‚æœæ²¡æœ‰æŒä¹…åŒ–çš„è¯ï¼Œç„¶åå°±æ²¡æœ‰ç„¶åäº†â€¦â€¦</p><h4 id="é•œåƒæ¨¡å¼ï¼šæŠŠéœ€è¦çš„é˜Ÿåˆ—åšæˆé•œåƒé˜Ÿåˆ—ï¼Œå­˜åœ¨äºå¤šä¸ªèŠ‚ç‚¹ï¼Œå±äºRabbitMQçš„HAæ–¹æ¡ˆã€‚"><a href="#é•œåƒæ¨¡å¼ï¼šæŠŠéœ€è¦çš„é˜Ÿåˆ—åšæˆé•œåƒé˜Ÿåˆ—ï¼Œå­˜åœ¨äºå¤šä¸ªèŠ‚ç‚¹ï¼Œå±äºRabbitMQçš„HAæ–¹æ¡ˆã€‚" class="headerlink" title="é•œåƒæ¨¡å¼ï¼šæŠŠéœ€è¦çš„é˜Ÿåˆ—åšæˆé•œåƒé˜Ÿåˆ—ï¼Œå­˜åœ¨äºå¤šä¸ªèŠ‚ç‚¹ï¼Œå±äºRabbitMQçš„HAæ–¹æ¡ˆã€‚"></a>é•œåƒæ¨¡å¼ï¼šæŠŠéœ€è¦çš„é˜Ÿåˆ—åšæˆé•œåƒé˜Ÿåˆ—ï¼Œå­˜åœ¨äºå¤šä¸ªèŠ‚ç‚¹ï¼Œå±äºRabbitMQçš„HAæ–¹æ¡ˆã€‚</h4><p>è¯¥æ¨¡å¼è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œå…¶å®è´¨å’Œæ™®é€šæ¨¡å¼ä¸åŒä¹‹å¤„åœ¨äºï¼Œæ¶ˆæ¯å®ä½“ä¼šä¸»åŠ¨åœ¨é•œåƒèŠ‚ç‚¹é—´åŒæ­¥ï¼Œè€Œä¸æ˜¯åœ¨consumerå–æ•°æ®æ—¶ä¸´æ—¶æ‹‰å–ã€‚</p><p>è¯¥æ¨¡å¼å¸¦æ¥çš„å‰¯ä½œç”¨ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œé™¤äº†é™ä½ç³»ç»Ÿæ€§èƒ½å¤–ï¼Œå¦‚æœé•œåƒé˜Ÿåˆ—æ•°é‡è¿‡å¤šï¼ŒåŠ ä¹‹å¤§é‡çš„æ¶ˆæ¯è¿›å…¥ï¼Œé›†ç¾¤å†…éƒ¨çš„ç½‘ç»œå¸¦å®½å°†ä¼šè¢«è¿™ç§åŒæ­¥é€šè®¯å¤§å¤§æ¶ˆè€—æ‰ã€‚</p><p>æ‰€ä»¥åœ¨å¯¹å¯é æ€§è¦æ±‚è¾ƒé«˜çš„åœºåˆä¸­é€‚ç”¨(åé¢ä¼šè¯¦ç»†ä»‹ç»è¿™ç§æ¨¡å¼ï¼Œç›®å‰æˆ‘ä»¬æ­å»ºçš„ç¯å¢ƒå±äºè¯¥æ¨¡å¼)</p><p>å¯åŠ¨ç£ç›˜èŠ‚ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl stop_app</span><br><span class="line">rabbitmqctl reset</span><br><span class="line">rabbitmqctl start_app</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</p><p>rabbit1</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl cluster_status</span><br></pre></td></tr></table></figure><p>åŠ å…¥é›†ç¾¤ï¼Œåªè¦åŠ å…¥å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å°±å¯ä»¥äº†</p><p>rabbit2</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl stop_app</span><br><span class="line">rabbitmqctl reset</span><br><span class="line">rabbitmqctl join_cluster --ram rabbit@rabbit1</span><br><span class="line">rabbitmqctl start_app</span><br></pre></td></tr></table></figure><p>rabbit3</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl stop_app</span><br><span class="line">rabbitmqctl reset</span><br><span class="line">rabbitmqctl join_cluster --ram rabbit@rabbit1</span><br><span class="line">rabbitmqctl start_app</span><br></pre></td></tr></table></figure><p>é€€å‡ºé›†ç¾¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># on rabbit3</span></span><br><span class="line">rabbitmqctl stop_app</span><br><span class="line"><span class="comment"># =&gt; Stopping node rabbit@rabbit3 ...done.</span></span><br><span class="line"></span><br><span class="line">rabbitmqctl reset</span><br><span class="line"><span class="comment"># =&gt; Resetting node rabbit@rabbit3 ...done.</span></span><br><span class="line">rabbitmqctl start_app</span><br><span class="line"><span class="comment"># =&gt; Starting node rabbit@rabbit3 ...done.</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨Rabbité•œåƒåŠŸèƒ½ï¼Œéœ€è¦åŸºäºrabbitmqç­–ç•¥æ¥å®ç°ï¼Œæ”¿ç­–æ˜¯ç”¨æ¥æ§åˆ¶å’Œä¿®æ”¹ç¾¤é›†èŒƒå›´çš„æŸä¸ªvhosté˜Ÿåˆ—è¡Œä¸ºå’ŒExchangeè¡Œä¸º</p><p>åœ¨clusterä¸­ä»»æ„èŠ‚ç‚¹å¯ç”¨ç­–ç•¥ï¼Œç­–ç•¥ä¼šè‡ªåŠ¨åŒæ­¥åˆ°é›†ç¾¤èŠ‚ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl set_policy -p hrsystem ha-allqueue<span class="string">"^"</span> <span class="string">'&#123;"ha-mode":"all"&#125;'</span></span><br></pre></td></tr></table></figure><p>è¿™è¡Œå‘½ä»¤åœ¨vhoståç§°ä¸ºhrsystemåˆ›å»ºäº†ä¸€ä¸ªç­–ç•¥ï¼Œç­–ç•¥åç§°ä¸ºha-allqueue,ç­–ç•¥æ¨¡å¼ä¸º all å³å¤åˆ¶åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼ŒåŒ…å«æ–°å¢èŠ‚ç‚¹ï¼Œ<br>ç­–ç•¥æ­£åˆ™è¡¨è¾¾å¼ä¸º â€œ^â€ è¡¨ç¤ºæ‰€æœ‰åŒ¹é…æ‰€æœ‰é˜Ÿåˆ—åç§°ã€‚<br>ä¾‹å¦‚rabbitmqctl set_policy -p hrsystem ha-allqueue â€œ^messageâ€ â€˜{â€œha-modeâ€:â€allâ€}â€™<br>æ³¨æ„ï¼šâ€^messageâ€ è¿™ä¸ªè§„åˆ™è¦æ ¹æ®è‡ªå·±ä¿®æ”¹ï¼Œè¿™ä¸ªæ˜¯æŒ‡åŒæ­¥â€messageâ€å¼€å¤´çš„é˜Ÿåˆ—åç§°ï¼Œæˆ‘ä»¬é…ç½®æ—¶ä½¿ç”¨çš„åº”ç”¨äºæ‰€æœ‰é˜Ÿåˆ—ï¼Œæ‰€ä»¥è¡¨è¾¾å¼ä¸ºâ€^â€<br>å®˜æ–¹set_policyè¯´æ˜å‚è§</p><p><a href="https://www.rabbitmq.com/rabbitmqctl.8.html#Policy_Management" target="_blank" rel="noopener">å®˜æ–¹set_policy</a></p><p><a href="https://www.rabbitmq.com/clustering.html" target="_blank" rel="noopener">é›†ç¾¤æŒ‡å—</a></p><hr><h2 id="å®Œç»“æ’’èŠ±"><a href="#å®Œç»“æ’’èŠ±" class="headerlink" title="å®Œç»“æ’’èŠ±"></a>å®Œç»“æ’’èŠ±</h2><hr><div id="link10"></div><h2 id="å¸®åŠ©"><a href="#å¸®åŠ©" class="headerlink" title="å¸®åŠ©"></a>å¸®åŠ©</h2><p><a href="https://www.rabbitmq.com" target="_blank" rel="noopener">å®˜ç½‘</a></p><p><a href="https://rabbitmq.github.io/rabbitmq-java-client/api/current/com/rabbitmq/client/Channel.html" target="_blank" rel="noopener">Java RabbitMQ Client Api æ–‡æ¡£</a></p><p><a href="https://www.rabbitmq.com/api-guide.html" target="_blank" rel="noopener">RabbitMQ Java Apiå®˜æ–¹æ•™ç¨‹ç”Ÿè‚‰</a></p><p><a href="https://blog.csdn.net/csdnzouqi/article/details/78926603#%E5%8F%91%E5%B8%83%E6%B6%88%E6%81%AFpublishing-messages" target="_blank" rel="noopener">RabbitMQ Java Apiå®˜æ–¹æ•™ç¨‹ç†Ÿè‚‰</a></p><p><a href="https://www.jianshu.com/p/79ca08116d57" target="_blank" rel="noopener">æ¶ˆæ¯é˜Ÿåˆ—ä¹‹ RabbitMQ</a></p><p><a href="https://www.jianshu.com/p/453c6e7ff81c" target="_blank" rel="noopener">åˆ†å¸ƒå¼å¼€æ”¾æ¶ˆæ¯ç³»ç»Ÿ(RocketMQ)çš„åŸç†ä¸å®è·µ</a></p><p><a href="https://www.cnblogs.com/wyt007/p/9081931.html" target="_blank" rel="noopener">RabbitMQé›†ç¾¤</a></p><p><a href="http://www.cnblogs.com/flat_peach/archive/2013/04/07/3004008.html" target="_blank" rel="noopener">Rabbitmqé›†ç¾¤é«˜å¯ç”¨æµ‹è¯•</a></p><p><a href="https://www.rabbitmq.com/rabbitmqctl.8.html" target="_blank" rel="noopener">Rabbitmqctl æ–‡æ¡£</a></p><p><a href="https://blog.csdn.net/u011665991/article/details/89487510" target="_blank" rel="noopener">RabbitMQç³»åˆ—æ–‡ç« </a></p>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;&lt;li&gt;&lt;a href=&quot;#link1&quot;&gt;ä»€ä¹ˆæ˜¯MQä¸ºä»€ä¹ˆä½¿ç”¨MQ&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#link2&quot;&gt;ä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQ&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#link3&quot;&gt;æ€ä¹ˆå®‰è£…RabbitMQ&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#link4&quot;&gt;RabbitMQæ€ä¹ˆä½¿ç”¨&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#link5&quot;&gt;RabbitMQæ¦‚å¿µ&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#link6&quot;&gt;RabbitMQæ¶ˆæ¯äº‹ç‰©&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#link7&quot;&gt;RabbitMQæ¶ˆæ¯ç¡®è®¤&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#link8&quot;&gt;RabbitMQé…ç½®&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#link9&quot;&gt;RabbitMQé›†ç¾¤&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#link10&quot;&gt;å¸®åŠ©&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h1 id=&quot;å½“å‰ç‰ˆæœ¬&quot;&gt;&lt;a href=&quot;#å½“å‰ç‰ˆæœ¬&quot; class=&quot;headerlink&quot; title=&quot;å½“å‰ç‰ˆæœ¬&quot;&gt;&lt;/a&gt;å½“å‰ç‰ˆæœ¬&lt;/h1&gt;&lt;blockquote&gt;&lt;ul&gt;&lt;li&gt;CentOS 7&lt;/li&gt;&lt;li&gt;Erlang 21.x&lt;/li&gt;&lt;li&gt;RabbitMQ 3.7.14&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="çƒ«çƒ«çƒ«çƒ«" scheme="https://aphage.me/categories/%E7%83%AB%E7%83%AB%E7%83%AB%E7%83%AB/"/>
    
    
  </entry>
  
  <entry>
    <title>csdn çªç ´æ­£ç‰ˆé“¾æ¥ç›´æ¥ä¸‹è½½</title>
    <link href="https://aphage.me/csdn-breakthrough-download/"/>
    <id>https://aphage.me/csdn-breakthrough-download/</id>
    <published>2018-10-10T22:53:25.000Z</published>
    <updated>2020-03-23T02:44:43.791Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//https://download.csdn.net/download/anonymous1991/10137472</span></span><br><span class="line"><span class="comment">//fileId=10137472</span></span><br><span class="line"><span class="comment">//ä¸èƒ½å…ç§¯åˆ†ï¼Œç‰ˆæƒé™åˆ¶ä¸èƒ½ä¸‹è½½</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">csdnFileDownload</span>(<span class="params">fileId</span>)</span>&#123;</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">type: <span class="string">'get'</span>,</span><br><span class="line">url: <span class="string">"/index.php/source/before_do_download/"</span>+fileId,</span><br><span class="line"><span class="keyword">async</span>: <span class="literal">false</span>,</span><br><span class="line">dataType: <span class="string">'jsonp'</span>,</span><br><span class="line">jsonpcallback: <span class="string">'jsonpcallback'</span>,</span><br><span class="line">success: <span class="function"><span class="keyword">function</span> (<span class="params">resobj</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> targetUrl=resobj.actionUrl+<span class="string">"/"</span>+<span class="built_in">encodeURIComponent</span>(<span class="built_in">encodeURIComponent</span>(SMSdk.getDeviceId()));</span><br><span class="line"><span class="built_in">console</span>.log(targetUrl);</span><br><span class="line"></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">type: <span class="string">'get'</span>,</span><br><span class="line">url: targetUrl,</span><br><span class="line"><span class="keyword">async</span>: <span class="literal">false</span>,</span><br><span class="line">dataType: <span class="string">'jsonp'</span>,</span><br><span class="line">jsonpcallback: <span class="string">'jsonpcallback'</span>,</span><br><span class="line">success: <span class="function"><span class="keyword">function</span> (<span class="params">resobj</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(resobj);</span><br><span class="line">location.href=resobj.msg;</span><br><span class="line">&#125;,</span><br><span class="line">error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span 
      
    
    </summary>
    
    
      <category term="åˆ†äº«å¢ƒ" scheme="https://aphage.me/categories/%E5%88%86%E4%BA%AB%E5%A2%83/"/>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://aphage.me/hello-world/"/>
    <id>https://aphage.me/hello-world/</id>
    <published>2017-11-20T11:30:46.000Z</published>
    <updated>2020-03-23T02:44:43.791Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><a id="more"></a><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="äº‹ä»¶ç°¿" scheme="https://aphage.me/categories/%E4%BA%8B%E4%BB%B6%E7%B0%BF/"/>
    
    
  </entry>
  
</feed>
